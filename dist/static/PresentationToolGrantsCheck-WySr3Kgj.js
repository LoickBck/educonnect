const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-D83XW4SH.js","static/sanity-qCghvVMa.js","static/LiveQueries-BBzIevxh.js","static/DisplayedDocumentBroadcaster-7O197tGn.js","static/PostMessageDocuments-D7CaEV4c.js","static/PostMessageRefreshMutations-BwB6fNds.js","static/PostMessagePerspective-DUPZh3PD.js","static/PostMessagePreviewSnapshots-C8ytQOak.js","static/PostMessageSchema-hyBbu31g.js","static/PostMessageTelemetry-DeQKWcYb.js"])))=>i.map(i=>d[i]);
import{a9 as nr,aa as rr,b4 as dt,b5 as sr,r as h,b6 as Kt,b7 as ar,j as u,b8 as or,b9 as dn,ba as pn,bb as xt,bc as Ie,bd as Ye,be as De,bf as ir,bg as pt,bh as cr,bi as lr,aF as Pt,bj as ft,bk as fn,bl as Et,bm as ur,bn as dr,bo as St,bp as pr,bq as fr,br as hr,bs as Rt,bt as Tt,bu as Ve,bv as Ue,bw as Ct,bx as It,by as Me,bz as qe,bA as At,aG as hn,bB as mr,bC as mn,bD as gr,bE as yr,b as z,P as ye,bF as ve,as as gn,bG as vr,bH as yn,N as Ke,bI as br,ak as kt,bJ as vn,O as wr,bK as xr,bL as Pr,bM as Sr,a1 as _r,v as bn,bN as jr,bO as Gt,bP as wn,ab as Er,bQ as Rr,bR as Tr,aE as ne,bS as Cr,bT as Ge,bU as xn,bV as ct,bW as Ir,bX as Ar,bY as kr,bZ as $r,b_ as Mr,b$ as Or,k as pe,c0 as $t,c1 as Mt,c2 as Lr,c3 as Pn,c4 as Xt,B as zr,c5 as Wr,C as ue,A as Sn,z as Xe,ap as Se,c6 as tt,T as X,S as Oe,c7 as nt,ah as rt,_ as ke,c8 as Ot,c9 as Dr,ca as Nr,cb as Ur,cc as qr,cd as Fr,ai as de,a as Vr,ce as lt,cf as Hr,cg as Br,ch as Kr,ci as Fe,cj as _n,ck as Gr,cl as Xr,W as Jr,cm as Qr,cn as Yr,co as Zr,cp as jn,cq as En,cr as es,at as ts,cs as ns,ct as rs,cu as ss,aW as as,$ as os,cv as is,cw as cs,cx as Rn,cy as Lt,cz as ls,az as Tn,cA as us,ac as Cn,aX as In,aD as ds,cB as ps,cC as fs,cD as hs,cE as ms,cF as gs,cG as ys,cH as vs,cI as bs}from"./sanity-qCghvVMa.js";import{i as ws,D as xs}from"./DisplayedDocumentBroadcaster-7O197tGn.js";function Ps(t,e){return e===void 0&&(e=null),e=e??t,nr(function(n,s){var r=[],a=0;n.subscribe(rr(s,function(o){var i,c,l,p,d=null;a++%e===0&&r.push([]);try{for(var y=dt(r),f=y.next();!f.done;f=y.next()){var v=f.value;v.push(o),t<=v.length&&(d=d??[],d.push(v))}}catch(g){i={error:g}}finally{try{f&&!f.done&&(c=y.return)&&c.call(y)}finally{if(i)throw i.error}}if(d)try{for(var m=dt(d),b=m.next();!b.done;b=m.next()){var v=b.value;sr(r,v),s.next(v)}}catch(g){l={error:g}}finally{try{b&&!b.done&&(p=m.return)&&p.call(m)}finally{if(l)throw l.error}}},function(){var o,i;try{for(var c=dt(r),l=c.next();!l.done;l=c.next()){var p=l.value;s.next(p)}}catch(d){o={error:d}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}s.complete()},void 0,function(){r=null}))})}function Ss({children:t,isValidProp:e,...n}){e&&or(e),n={...h.useContext(Kt),...n},n.isStatic=ar(()=>n.isStatic);const s=h.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return u.jsx(Kt.Provider,{value:s,children:t})}const _s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zt=/_key\s*==\s*['"](.*)['"]/,js=/^\d*:\d*$/;function Wt(t){return typeof t=="number"||typeof t=="string"&&/^\[\d+\]$/.test(t)}function ut(t){return typeof t=="string"?zt.test(t.trim()):typeof t=="object"&&"_key"in t}function An(t){if(typeof t=="string"&&js.test(t))return!0;if(!Array.isArray(t)||t.length!==2)return!1;const[e,n]=t;return(typeof e=="number"||e==="")&&(typeof n=="number"||n==="")}function Es(t,e,n){const s=typeof e=="string"?kn(e):e;if(!Array.isArray(s))throw new Error("Path must be an array or a string");let r=t;for(let a=0;a<s.length;a++){const o=s[a];if(Wt(o)){if(!Array.isArray(r))return n;r=r[o]}if(ut(o)){if(!Array.isArray(r))return n;r=r.find(i=>i._key===o._key)}if(typeof o=="string"&&(r=typeof r=="object"&&r!==null?r[o]:void 0),typeof r>"u")return n}return r}function Rs(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce((e,n,s)=>{const r=typeof n;if(r==="number")return`${e}[${n}]`;if(r==="string")return`${e}${s===0?"":"."}${n}`;if(ut(n)&&n._key)return`${e}[_key=="${n._key}"]`;if(Array.isArray(n)){const[a,o]=n;return`${e}[${a}:${o}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}function kn(t){if(typeof t!="string")throw new Error("Path is not a string");const e=t.match(_s);if(!e)throw new Error("Invalid path string");return e.map(Ts)}function Ts(t){return Wt(t)?Cs(t):ut(t)?Is(t):An(t)?As(t):t}function Cs(t){return Number(t.replace(/[^\d]/g,""))}function Is(t){return{_key:t.match(zt)[1]}}function As(t){const[e,n]=t.split(":").map(s=>s===""?s:Number(s));return[e,n]}var $n=Object.freeze({__proto__:null,fromString:kn,get:Es,isIndexSegment:Wt,isIndexTuple:An,isKeySegment:ut,reKeySegment:zt,toString:Rs});const ks="drafts",$s="versions",He=".",st=`${ks}${He}`,Mn=`${$s}${He}`;function On(t){return t.startsWith(st)}function Ln(t){return t.startsWith(Mn)}function xi(t){if(Ln(t)){const e=zn(t);return st+e}return On(t)?t:st+t}function Pi(t,e){if(e==="drafts"||e==="published")throw new Error('Version can not be "published" or "drafts"');return`${Mn}${e}${He}${zn(t)}`}function zn(t){return Ln(t)?t.split(He).slice(2).join(He):On(t)?t.slice(st.length):t}const Jt={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},Qt={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function Ms(t){return`$${t.map(e=>typeof e=="string"?`['${e.replace(/[\f\n\r\t'\\]/g,n=>Jt[n])}']`:typeof e=="number"?`[${e}]`:e._key!==""?`[?(@._key=='${e._key.replace(/['\\]/g,n=>Jt[n])}')]`:`[${e._index}]`).join("")}`}function Si(t){const e=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let s;for(;(s=n.exec(t))!==null;){if(s[1]!==void 0){const r=s[1].replace(/\\(\\|f|n|r|t|')/g,a=>Qt[a]);e.push(r);continue}if(s[2]!==void 0){e.push(parseInt(s[2],10));continue}if(s[3]!==void 0){const r=s[3].replace(/\\(\\')/g,a=>Qt[a]);e.push({_key:r,_index:-1});continue}}return e}function Os(t){return t.map(e=>{if(typeof e=="string"||typeof e=="number")return e;if(e._index!==-1)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function _i(t,e){if(!(e!=null&&e.mappings))return;const n=Ms(Os(t));if(e.mappings[n]!==void 0)return{mapping:e.mappings[n],matchedPath:n,pathSuffix:""};const s=Object.entries(e.mappings).filter(([i])=>n.startsWith(i)).sort(([i],[c])=>c.length-i.length);if(s.length==0)return;const[r,a]=s[0],o=n.substring(r.length);return{mapping:a,matchedPath:r,pathSuffix:o}}function Ls(t){return t!==null&&Array.isArray(t)}function Yt(t){return typeof t=="object"&&t!==null}function Ne(t,e,n=[]){if(Ls(t))return t.map((s,r)=>{if(Yt(s)){const a=s._key;if(typeof a=="string")return Ne(s,e,n.concat({_key:a,_index:r}))}return Ne(s,e,n.concat(r))});if(Yt(t)){if(t._type==="block"||t._type==="span"){const s={...t};return t._type==="block"?s.children=Ne(t.children,e,n.concat("children")):t._type==="span"&&(s.text=Ne(t.text,e,n.concat("text"))),s}return Object.fromEntries(Object.entries(t).map(([s,r])=>[s,Ne(r,e,n.concat(s))]))}return e(t,n)}const te=[];for(let t=0;t<256;++t)te.push((t+256).toString(16).slice(1));function zs(t,e=0){return(te[t[e+0]]+te[t[e+1]]+te[t[e+2]]+te[t[e+3]]+"-"+te[t[e+4]]+te[t[e+5]]+"-"+te[t[e+6]]+te[t[e+7]]+"-"+te[t[e+8]]+te[t[e+9]]+"-"+te[t[e+10]]+te[t[e+11]]+te[t[e+12]]+te[t[e+13]]+te[t[e+14]]+te[t[e+15]]).toLowerCase()}let ht;const Ws=new Uint8Array(16);function Ds(){if(!ht){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ht=crypto.getRandomValues.bind(crypto)}return ht(Ws)}const Ns=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zt={randomUUID:Ns};function We(t,e,n){var r;if(Zt.randomUUID&&!t)return Zt.randomUUID();t=t||{};const s=t.random??((r=t.rng)==null?void 0:r.call(t))??Ds();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,zs(s)}const en=t=>({context:e})=>{const{count:n,include:s,exclude:r,responseType:a="message.received"}=t;return{count:n,domain:e.domain,from:e.connectTo,include:s?Array.isArray(s)?s:[s]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:a,target:e.target,to:e.name}},Us=t=>e=>{const{data:n}=e;return(t.include.length?t.include.includes(n.type):!0)&&(t.exclude.length?!t.exclude.includes(n.type):!0)&&n.domain===t.domain&&n.from===t.from&&n.to===t.to&&(!t.target||e.source===t.target)},qs=t=>e=>({type:t,message:e}),Fs=lr(()=>St(window,"message")),Wn=t=>pn(({input:e})=>Fs.pipe(t?Pt(t):ft(),fn(Us(e)),Pt(qs(e.responseType)),e.count?ft(Ps(e.count),ur(n=>n),Et(e.count)):ft())),Dt="sanity/comlink",Vs=3e3,Hs=500,Be="comlink/response",at="comlink/heartbeat",Nt="comlink/disconnect",Ut="comlink/handshake/syn",qt="comlink/handshake/syn-ack",Ft="comlink/handshake/ack",Bs=t=>e=>e.pipe(Et(1),Pt(()=>{throw new Error(t)})),Dn=()=>dn({actors:{listen:pn(({input:t})=>{const e=t.signal?St(t.signal,"abort").pipe(Bs(`Request ${t.requestId} aborted`)):pr,n=s=>{var r,a;return((r=s.data)==null?void 0:r.type)===Be&&((a=s.data)==null?void 0:a.responseTo)===t.requestId&&!!s.source&&t.sources.has(s.source)};return St(window,"message").pipe(fn(n),Et(t.sources.size),fr(e))})},actions:{"send message":({context:t},e)=>{const{sources:n,targetOrigin:s}=t,{message:r}=e;n.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},"on success":pt(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return t.response&&((n=t.resolvable)==null||n.resolve(t.response)),{type:"request.success",requestId:e.id,response:t.response,responseTo:t.responseTo}}),"on fail":pt(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return t.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${t.type}' on client '${t.from}' (ID: '${t.id}').`),(n=t.resolvable)==null||n.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":pt(({context:t})=>t.parentRef,({context:t,self:e})=>{var n;return(n=t.resolvable)==null||n.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:t})=>t.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:t})=>t.responseTimeout??Vs}}).createMachine({context:({input:t})=>({channelId:t.channelId,data:t.data,domain:t.domain,expectResponse:t.expectResponse??!1,from:t.from,id:`msg-${We()}`,parentRef:t.parentRef,resolvable:t.resolvable,response:null,responseTimeout:t.responseTimeout,responseTo:t.responseTo,signal:t.signal,sources:t.sources instanceof Set?t.sources:new Set([t.sources]),suppressWarnings:t.suppressWarnings,targetOrigin:t.targetOrigin,to:t.to,type:t.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:t})=>{const{channelId:e,data:n,domain:s,from:r,id:a,responseTo:o,to:i,type:c}=t;return{message:{channelId:e,data:n,domain:s,from:r,id:a,to:i,type:c,responseTo:o}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:t})=>({requestId:t.id,sources:t.sources,signal:t.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:xt({response:({event:t})=>t.data.data,responseTo:({event:t})=>t.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:t,self:e})=>({requestId:e.id,response:t.response,responseTo:t.responseTo})}),Ks=hr(({sendBack:t,input:e})=>{const n=()=>{t(e.event)};e.immediate&&n();const s=setInterval(n,e.interval);return()=>{clearInterval(s)}}),ot=()=>dn({actors:{requestMachine:Dn(),listen:Wn(),sendBackAtInterval:Ks},actions:{"buffer message":Ye(({enqueue:t})=>{t.assign({buffer:({event:e,context:n})=>(Ie(e,"post"),[...n.buffer,e.data])}),t.emit(({event:e})=>(Ie(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":xt({requests:({context:t,event:e,self:n,spawn:s})=>{Ie(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(a=>{const o=`req-${We()}`;return s("requestMachine",{id:o,input:{channelId:t.channelId,data:a.data,domain:t.domain,expectResponse:a.expectResponse,from:t.name,parentRef:n,responseTo:a.responseTo,sources:t.target,targetOrigin:t.targetOrigin,to:t.connectTo,type:a.type}})});return[...t.requests,...r]}}),"emit received message":Ye(({enqueue:t})=>{t.emit(({event:e})=>(Ie(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":ir((t,e)=>({type:"status",status:e.status})),"post message":De(({event:t})=>(Ie(t,"post"),{type:"request",data:{data:t.data.data,expectResponse:!0,type:t.data.type}})),"remove request":Ye(({context:t,enqueue:e,event:n})=>{Ie(n,["request.success","request.failed","request.aborted"]),dr(n.requestId),e.assign({requests:t.requests.filter(({id:s})=>s!==n.requestId)})}),respond:De(({event:t})=>(Ie(t,"response"),{type:"request",data:{data:t.data,type:Be,responseTo:t.respondTo}})),"send handshake ack":De({type:"request",data:{type:Ft}}),"send disconnect":De(()=>({type:"request",data:{type:Nt}})),"send handshake syn":De({type:"request",data:{type:Ut}}),"send pending messages":Ye(({enqueue:t})=>{t.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:n,type:s})=>({data:n,type:s}))})),t.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),t.assign({buffer:[]})}),"set target":xt({target:({event:t})=>(Ie(t,"target.set"),t.target)})},guards:{"has target":({context:t})=>!!t.target,"should send heartbeats":({context:t})=>t.heartbeat}}).createMachine({id:"connection",context:({input:t})=>({id:t.id||`${t.name}-${We()}`,buffer:[],channelId:`chn-${We()}`,connectTo:t.connectTo,domain:t.domain??Dt,heartbeat:t.heartbeat??!1,name:t.name,requests:[],target:t.target,targetOrigin:t.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:Hs,immediate:!0})},{id:"listen for handshake",src:"listen",input:t=>en({include:qt,count:1})(t)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:en({exclude:[Be,at]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:at,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),mt=(t,e=ot())=>{const n=t.id||`${t.name}-${We()}`,s=cr(e,{input:{...t,id:n}}),r=new Map,a=new Map,o=(v,m,b)=>{const g=r.get(v)||new Set;r.has(v)||r.set(v,g),g.add(m);const w=a.get(v);if(w){const P=(b==null?void 0:b.replay)??1;Array.from(w).slice(-P).forEach(async({data:x,id:j})=>{const R=await m(x);R&&s.send({type:"response",respondTo:j,data:R})}),a.delete(v)}return()=>{g.delete(m)}},i=()=>{s.send({type:"connect"})},c=()=>{s.send({type:"disconnect"})},l=(v,m)=>{const{unsubscribe:b}=s.on("status",g=>{m&&g.status!==m||v(g.status)});return b},p=v=>{s.send({type:"target.set",target:v})},d=(v,m)=>{const b={type:v,data:m};s.send({type:"post",data:b})};s.on("message",async({message:v})=>{const m=r.get(v.type);if(m){m.forEach(async g=>{const w=await g(v.data);w&&s.send({type:"response",respondTo:v.id,data:w})});return}const b=a.get(v.type);b?b.add(v):a.set(v.type,new Set([v]))});const y=()=>{s.stop()},f=()=>(s.start(),y);return{actor:s,connect:i,disconnect:c,id:n,name:t.name,machine:e,on:o,onStatus:l,post:d,setTarget:p,start:f,stop:y,get target(){return s.getSnapshot().context.target}}},gt=t=>{t.disconnect(),setTimeout(()=>{t.stop()},0)},Gs=()=>{},Xs=t=>{const{targetOrigin:e}=t,n=new Set,s=new Set;return{addTarget:r=>{if(n.has(r))return Gs;if(!n.size||!s.size)return n.add(r),s.forEach(o=>{o.connections.forEach(i=>{i.setTarget(r),i.connect()})}),()=>{n.delete(r),s.forEach(o=>{o.connections.forEach(i=>{i.target===r&&i.disconnect()})})};n.add(r);const a=new Set;return s.forEach(o=>{const i=mt({...o.input,target:r,targetOrigin:e},o.machine);a.add(i),o.connections.add(i),o.subscribers.forEach(({type:c,handler:l,unsubscribers:p})=>{p.push(i.on(c,l))}),o.internalEventSubscribers.forEach(({type:c,handler:l,unsubscribers:p})=>{p.push(i.actor.on(c,l).unsubscribe)}),o.statusSubscribers.forEach(({handler:c,unsubscribers:l})=>{l.push(i.onStatus(p=>c({connection:i.id,status:p})))}),i.start(),i.connect()}),()=>{n.delete(r),a.forEach(o=>{gt(o),s.forEach(i=>{i.connections.delete(o)})})}},createChannel:(r,a=ot())=>{const o={connections:new Set,input:r,internalEventSubscribers:new Set,machine:a,statusSubscribers:new Set,subscribers:new Set};s.add(o);const{connections:i,internalEventSubscribers:c,statusSubscribers:l,subscribers:p}=o;if(n.size)n.forEach(b=>{const g=mt({...r,target:b,targetOrigin:e},a);i.add(g)});else{const b=mt({...r,targetOrigin:e},a);i.add(b)}const d=(...b)=>{const[g,w]=b;i.forEach(P=>{P.post(g,w)})},y=(b,g)=>{const w=[];i.forEach(x=>{w.push(x.on(b,g))});const P={type:b,handler:g,unsubscribers:w};return p.add(P),()=>{w.forEach(x=>x()),p.delete(P)}},f=(b,g)=>{const w=[];i.forEach(x=>{w.push(x.actor.on(b,g).unsubscribe)});const P={type:b,handler:g,unsubscribers:w};return c.add(P),()=>{w.forEach(x=>x()),c.delete(P)}},v=b=>{const g=[];i.forEach(P=>{g.push(P.onStatus(x=>b({connection:P.id,status:x})))});const w={handler:b,unsubscribers:g};return l.add(w),()=>{g.forEach(P=>P()),l.delete(w)}},m=()=>{const b=o.connections;b.forEach(gt),b.clear(),s.delete(o)};return{on:y,onInternalEvent:f,onStatus:v,post:d,start:()=>(i.forEach(b=>{b.start(),b.connect()}),m),stop:m}},destroy:()=>{s.forEach(({connections:r})=>{r.forEach(gt),r.clear()}),s.clear(),n.clear()}}},Js={"handshake/syn":Ut,"handshake/syn-ack":qt,"handshake/ack":Ft,"channel/response":Be,"channel/heartbeat":at,"channel/disconnect":Nt,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Qs={[Ut]:"handshake/syn",[qt]:"handshake/syn-ack",[Ft]:"handshake/ack",[Be]:"channel/response",[at]:"channel/heartbeat",[Nt]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},Ys=t=>{const{data:e}=t;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=Dt),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=Js[e.type]??e.type),t},Zs=t=>{const{channelId:e,...n}=t,s={...n,connectionId:e};return s.domain===Dt&&(s.domain="sanity/channels"),s.to==="visual-editing"&&(s.to="overlays"),s.from==="visual-editing"&&(s.from="overlays"),s.type=Qs[s.type]??s.type,s.type==="channel/response"&&s.responseTo&&!s.data&&(s.data={responseTo:s.responseTo}),(s.type==="handshake/syn"||s.type==="handshake/syn-ack"||s.type==="handshake/ack")&&(s.data={id:s.connectionId}),s},ea=({context:t},e)=>{const{sources:n,targetOrigin:s}=t,r=Zs(e.message);n.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},tn=()=>({listen:Wn(Ys),requestMachine:Dn().provide({actions:{"send message":ea}})});function ta(t){const e=new URL(t),{searchParams:n}=e;return n.delete(Rt),n.delete(Tt),n.delete(Ve),n.delete(Ue),n.delete(Ct),e}function na(t,e,n,s){const r=new URL(t),{searchParams:a}=r;return e&&(a.set(Tt,e),a.set(Rt,n)),a.set(Ve,s),r}function Nn(){if(typeof crypto<"u"){const t=new Uint8Array(16);crypto.getRandomValues(t);let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function ra(t,e,n,s){const r=t.withConfig({apiVersion:It}),a=Nn(),o=r.patch(Me).set({secret:a,studioUrl:n,userId:s});return await r.transaction().createIfNotExists({_id:Me,_type:qe,source:e,studioUrl:n,userId:s}).patch(o).commit({tag:At}),{secret:a}}async function sa(t,e,n,s){const r=t.withConfig({apiVersion:It}),a=r.patch(Me).set({secret:null,studioUrl:n,userId:s});await r.transaction().createIfNotExists({_id:Me,_type:qe,source:e,studioUrl:n,userId:s}).patch(a).commit({tag:At})}function aa(t){for(var e=[],n=0;n<t.length;){var s=t[n];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:n,value:t[n++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if(s==="{"){e.push({type:"OPEN",index:n,value:t[n++]});continue}if(s==="}"){e.push({type:"CLOSE",index:n,value:t[n++]});continue}if(s===":"){for(var r="",a=n+1;a<t.length;){var o=t.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){r+=t[a++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(n));e.push({type:"NAME",index:n,value:r}),n=a;continue}if(s==="("){var i=1,c="",a=n+1;if(t[a]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<t.length;){if(t[a]==="\\"){c+=t[a++]+t[a++];continue}if(t[a]===")"){if(i--,i===0){a++;break}}else if(t[a]==="("&&(i++,t[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(a));c+=t[a++]}if(i)throw new TypeError("Unbalanced pattern at ".concat(n));if(!c)throw new TypeError("Missing pattern at ".concat(n));e.push({type:"PATTERN",index:n,value:c}),n=a;continue}e.push({type:"CHAR",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}function oa(t,e){e===void 0&&(e={});for(var n=aa(t),s=e.prefixes,r=s===void 0?"./":s,a=e.delimiter,o=a===void 0?"/#?":a,i=[],c=0,l=0,p="",d=function(S){if(l<n.length&&n[l].type===S)return n[l++].value},y=function(S){var E=d(S);if(E!==void 0)return E;var C=n[l],k=C.type,A=C.index;throw new TypeError("Unexpected ".concat(k," at ").concat(A,", expected ").concat(S))},f=function(){for(var S="",E;E=d("CHAR")||d("ESCAPED_CHAR");)S+=E;return S},v=function(S){for(var E=0,C=o;E<C.length;E++){var k=C[E];if(S.indexOf(k)>-1)return!0}return!1},m=function(S){var E=i[i.length-1],C=S||(E&&typeof E=="string"?E:"");if(E&&!C)throw new TypeError('Must have text between two parameters, missing text after "'.concat(E.name,'"'));return!C||v(C)?"[^".concat(Ae(o),"]+?"):"(?:(?!".concat(Ae(C),")[^").concat(Ae(o),"])+?")};l<n.length;){var b=d("CHAR"),g=d("NAME"),w=d("PATTERN");if(g||w){var P=b||"";r.indexOf(P)===-1&&(p+=P,P=""),p&&(i.push(p),p=""),i.push({name:g||c++,prefix:P,suffix:"",pattern:w||m(P),modifier:d("MODIFIER")||""});continue}var x=b||d("ESCAPED_CHAR");if(x){p+=x;continue}p&&(i.push(p),p="");var j=d("OPEN");if(j){var P=f(),R=d("NAME")||"",_=d("PATTERN")||"",I=f();y("CLOSE"),i.push({name:R||(_?c++:""),pattern:R&&!_?m(P):_,prefix:P,suffix:I,modifier:d("MODIFIER")||""});continue}y("END")}return i}function ia(t,e){var n=[],s=qn(t,n,e);return ca(s,n,e)}function ca(t,e,n){n===void 0&&(n={});var s=n.decode,r=s===void 0?function(a){return a}:s;return function(a){var o=t.exec(a);if(!o)return!1;for(var i=o[0],c=o.index,l=Object.create(null),p=function(y){if(o[y]===void 0)return"continue";var f=e[y-1];f.modifier==="*"||f.modifier==="+"?l[f.name]=o[y].split(f.prefix+f.suffix).map(function(v){return r(v,f)}):l[f.name]=r(o[y],f)},d=1;d<o.length;d++)p(d);return{path:i,index:c,params:l}}}function Ae(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Un(t){return t&&t.sensitive?"":"i"}function la(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=n.exec(t.source);r;)e.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=n.exec(t.source);return t}function ua(t,e,n){var s=t.map(function(r){return qn(r,e,n).source});return new RegExp("(?:".concat(s.join("|"),")"),Un(n))}function da(t,e,n){return pa(oa(t,n),e,n)}function pa(t,e,n){n===void 0&&(n={});for(var s=n.strict,r=s===void 0?!1:s,a=n.start,o=a===void 0?!0:a,i=n.end,c=i===void 0?!0:i,l=n.encode,p=l===void 0?function(E){return E}:l,d=n.delimiter,y=d===void 0?"/#?":d,f=n.endsWith,v=f===void 0?"":f,m="[".concat(Ae(v),"]|$"),b="[".concat(Ae(y),"]"),g=o?"^":"",w=0,P=t;w<P.length;w++){var x=P[w];if(typeof x=="string")g+=Ae(p(x));else{var j=Ae(p(x.prefix)),R=Ae(p(x.suffix));if(x.pattern)if(e&&e.push(x),j||R)if(x.modifier==="+"||x.modifier==="*"){var _=x.modifier==="*"?"?":"";g+="(?:".concat(j,"((?:").concat(x.pattern,")(?:").concat(R).concat(j,"(?:").concat(x.pattern,"))*)").concat(R,")").concat(_)}else g+="(?:".concat(j,"(").concat(x.pattern,")").concat(R,")").concat(x.modifier);else{if(x.modifier==="+"||x.modifier==="*")throw new TypeError('Can not repeat "'.concat(x.name,'" without a prefix and suffix'));g+="(".concat(x.pattern,")").concat(x.modifier)}else g+="(?:".concat(j).concat(R,")").concat(x.modifier)}}if(c)r||(g+="".concat(b,"?")),g+=n.endsWith?"(?=".concat(m,")"):"$";else{var I=t[t.length-1],S=typeof I=="string"?b.indexOf(I[I.length-1])>-1:I===void 0;r||(g+="(?:".concat(b,"(?=").concat(m,"))?")),S||(g+="(?=".concat(b,"|").concat(m,")"))}return new RegExp(g,Un(n))}function qn(t,e,n){return t instanceof RegExp?la(t,e):Array.isArray(t)?ua(t,e,n):da(t,e,n)}async function fa(t,e,n,s,r=hn()){const a=t.withConfig({apiVersion:It});try{const o=new Date(Date.now()+1e3*mr),i=`drafts.${r}`,c=Nn(),l=a.patch(i).set({secret:c,source:e,studioUrl:n,userId:s});return await a.transaction().createOrReplace({_id:i,_type:mn}).patch(l).commit({tag:At}),{secret:c,expiresAt:o}}finally{try{await a.delete({query:gr})}catch(o){console.error("Failed to delete expired secrets",o)}}}function ha(t){const{draftMode:e,previewMode:n,origin:s=typeof location>"u"?"https://localhost":location.origin}=t,r=(n==null?void 0:n.enable)||(e==null?void 0:e.enable);let{preview:a="/"}=t;const o=new URL(a,s),i=r?new URL(r,s):void 0;return async c=>{try{if(c.previewSearchParam){const p=new URL(c.previewSearchParam,o);p.origin===o.origin&&(a=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&c.studioBasePath&&(a.startsWith(`${c.studioBasePath}/`)||a===c.studioBasePath)&&(a=t.preview||"/");const l=new URL(a,o);if(i){const p=new URL(i),{searchParams:d}=p;return d.set(Tt,c.previewUrlSecret),d.set(Ve,c.studioPreviewPerspective),l.pathname!==p.pathname&&d.set(Rt,`${l.pathname}${l.search}`),p.toString()}return l.toString()}}const ma=t=>typeof t=="object"&&typeof t.then=="function",Ze=[];function ga(t,e,n=(s,r)=>s===r){if(t===e)return!0;if(!t||!e)return!1;const s=t.length;if(e.length!==s)return!1;for(let r=0;r<s;r++)if(!n(t[r],e[r]))return!1;return!0}function ya(t,e=null,n=!1,s={}){e===null&&(e=[t]);for(const a of Ze)if(ga(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return s.lifespan&&s.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,s.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:s.equal,remove:()=>{const a=Ze.indexOf(r);a!==-1&&Ze.splice(a,1)},promise:(ma(t)?t:t(...e)).then(a=>{r.response=a,s.lifespan&&s.lifespan>0&&(r.timeout=setTimeout(r.remove,s.lifespan))}).catch(a=>r.error=a)};if(Ze.push(r),!n)throw r.promise}const Fn=(t,e,n)=>ya(t,e,!1,n);function va(t,e){let n=new AbortController,s=[];async function r(o,i){const{result:c,syncTags:l}=await t.fetch(yr,{},{filterResponse:!1,lastLiveEventId:o,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(l)&&(s=l),i.aborted||e(c)}const a=t.live.events().subscribe({next:o=>{o.type==="message"&&(n.abort(),n=new AbortController,o.tags.some(i=>s.includes(i))&&r(o.id,n.signal))},error:o=>console.error(o)});return r(null,n.signal),()=>{a.unsubscribe(),n.abort()}}const ba=t=>{const e=z.c(3),{comlink:n}=t;let s,r;return e[0]!==n?(s=()=>n.on("visual-editing/features",xa),r=[n],e[0]=n,e[1]=s,e[2]=r):(s=e[1],r=e[2]),h.useEffect(s,r),null};var wa=h.memo(ba);function xa(){return{features:{optimistic:!0}}}function Vn(t,e){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{t.apply(t,s)},e)}}const Pa=function(t){const e=z.c(14),{comlink:n,children:s}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const a=h.useRef(r);let o,i;e[1]!==n?(o=()=>n==null?void 0:n.on("visual-editing/shared-state",()=>({state:a.current})),i=[n],e[1]=n,e[2]=o,e[3]=i):(o=e[2],i=e[3]),h.useEffect(o,i);let c;e[4]!==n?(c=(b,g)=>{a.current[b]=g,n==null||n.post("presentation/shared-state",{key:b,value:g})},e[4]=n,e[5]=c):c=e[5];const l=c;let p;e[6]!==n?(p=b=>{n==null||n.post("presentation/shared-state",{key:b}),delete a.current[b]},e[6]=n,e[7]=p):p=e[7];const d=p;let y,f;e[8]!==d||e[9]!==l?(f={removeValue:d,setValue:l},e[8]=d,e[9]=l,e[10]=f):f=e[10],y=f;const v=y;let m;return e[11]!==s||e[12]!==v?(m=u.jsx(Or.Provider,{value:v,children:s}),e[11]=s,e[12]=v,e[13]=m):m=e[13],m},Sa=pe.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Vt=function(t){const e=z.c(15),{children:n,defaultSize:s,id:r,minWidth:a,maxWidth:o,order:i}=t,c=s===void 0?null:s,l=i===void 0?0:i,p=h.useContext($t);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:y,unregisterElement:f}=p;let v;e[0]!==d||e[1]!==r?(v=d(r),e[0]=d,e[1]=r,e[2]=v):v=e[2];const m=v;let b,g;e[3]!==c||e[4]!==r||e[5]!==o||e[6]!==a||e[7]!==l||e[8]!==y||e[9]!==f?(b=()=>(y(r,{id:r,type:"panel",defaultSize:c,maxWidth:o??null,minWidth:a??0,order:l}),()=>{f(r)}),g=[r,c,l,o,a,y,f],e[3]=c,e[4]=r,e[5]=o,e[6]=a,e[7]=l,e[8]=y,e[9]=f,e[10]=b,e[11]=g):(b=e[10],g=e[11]),h.useLayoutEffect(b,g);let w;return e[12]!==n||e[13]!==m?(w=u.jsx(Sa,{style:m,children:n}),e[12]=n,e[13]=m,e[14]=w):w=e[14],w},Hn="presentation/panels",Bn=()=>JSON.parse(localStorage.getItem(Hn)||"{}"),_a=t=>{localStorage.setItem(Hn,JSON.stringify(t))},Kn=t=>t.map(e=>[e.id,e.order].join(":")).join(",");function ja(){const t=z.c(1);let e;const n=Ra,s=Ea;let r;if(t[0]===Symbol.for("react.memo_cache_sentinel")){const a=Vn(s,100);r={get:n,set:s,setDebounced:a},t[0]=r}else r=t[0];return e=r,e}function Ea(t,e){const n=Bn(),s=Kn(t),r={...n,[s]:e};_a(r)}function Ra(t){const e=Bn(),n=Kn(t);return Array.isArray(e[n])&&e[n].some(Ta)?void 0:e[n]}function Ta(t){return t===null}function _t(t,e,n){const{maxWidth:s,minWidth:r}=t,a=s==null?100:s/n*100,o=r/n*100;return Math.min(a,Math.max(o,e))}function Ca(t,e,n,s,r,a){const{panels:o,widths:i}=r,{widths:c}=a,l=c||i,p=[...l];{const v=t<0?s:n,m=o.findIndex(w=>w.id===v.id),b=l[m],g=_t(v,b+Math.abs(t),e);if(b===g)return l;t=t<0?b-g:g-b}let d=0,y=t<0?n:s,f=o.findIndex(v=>v.id===y.id);for(;;){const v=o[f],m=l[f],b=Math.abs(t)-Math.abs(d),g=_t(v,m-b,e);if(m!==g&&(d+=m-g,p[f]=g,d.toPrecision(10).localeCompare(Math.abs(t).toPrecision(10),void 0,{numeric:!0})>=0))break;if(t<0){if(--f<0)break}else if(++f>=o.length)break}return d===0?l:(y=t<0?s:n,f=o.findIndex(v=>v.id===y.id),p[f]=l[f]+d,p)}function Ia(t,e,n){if(t.length===1)return"100";const s=t.findIndex(a=>a.id===e),r=n[s];return r==null?"0":r.toPrecision(10)}function nn(t,e,n=0,s=null){const r=t.clientX,a=(s||e.getBoundingClientRect()).left;return r-a-n}function yt(t){return t.type==="panel"}function rn(t){return t.type==="resizer"}function sn(t){return Array.from(t.values()).sort(({order:e},{order:n})=>e==null&&n==null?0:e==null?-1:n==null?1:e-n)}function an(t,e,n){const s=e.reduce((o,i)=>o+i,0),r=[...e].map(o=>o/s*100);let a=0;for(let o=0;o<t.length;o++){const i=t[o],c=r[o],l=_t(i,c,n);c!=l&&(a+=c-l,r[o]=l)}if(a.toFixed(3)!=="0.000")for(let o=0;o<t.length;o++){const i=t[o];let{maxWidth:c,minWidth:l}=i;l=l/n*100,c!=null&&(c=c/n*100);const p=Math.min(c??100,Math.max(l,r[o]+a));if(p!==r[o]&&(a-=p-r[o],r[o]=p,Math.abs(a).toFixed(3)==="0.000"))break}return r}function Aa(t){let e=t.length,n=100;const s=t.map(a=>a.defaultSize?(n-=a.defaultSize,e-=1,a.defaultSize):null),r=n/e;return s.map(a=>a===null?r:a)}const ka=pe.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,$a=function(t){const e=z.c(46),{children:n}=t,s=h.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[a,o]=h.useState(r);let i,c;e[1]!==a?(c=sn(a).filter(yt),e[1]=a,e[2]=c):c=e[2],i=c;const l=i;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,y]=h.useState(p),[f,v]=h.useState(null);let m;e[4]!==a||e[5]!==l||e[6]!==d?(m={elements:a,panels:l,widths:d},e[4]=a,e[5]=l,e[6]=d,e[7]=m):m=e[7];const b=h.useRef(m);let g;e[8]!==f||e[9]!==l||e[10]!==d?(g=H=>({flexGrow:Ia(l,H,d),pointerEvents:f===null?void 0:"none"}),e[8]=f,e[9]=l,e[10]=d,e[11]=g):g=e[11];const w=g;let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=(H,F)=>{o(B=>{if(B.has(H))return B;const K=new Map(B);return K.set(H,F),K})},e[12]=P):P=e[12];const x=P;let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=H=>{o(F=>{if(!F.has(H))return F;const B=new Map(F);return B.delete(H),B})},e[13]=j):j=e[13];const R=j;let _;e[14]===Symbol.for("react.memo_cache_sentinel")?(_={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=_):_=e[14];const I=h.useRef(_);let S;e[15]!==a?(S=(H,F)=>{const B=sn(a),K=B.findIndex(ee=>ee.id===H),se=a.get(H);if(!se||!rn(se))return;const G=se.el.current;G&&(I.current={resizerIndex:K,panelBefore:B.reduce((ee,Y,ae)=>yt(Y)&&ae<K?Y:ee,null),panelAfter:B.reduce((ee,Y,ae)=>ee===null&&yt(Y)&&ae>K?Y:ee,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:nn(F,G),resizerRect:G.getBoundingClientRect(),widths:b.current.widths},v(H))},e[15]=a,e[16]=S):S=e[16];const E=S;let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{v(null)},e[17]=C):C=e[17];const k=C;let A;e[18]!==a?(A=(H,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:B,dragOffset:K,panelBefore:se,panelAfter:G,resizerRect:ee}=I.current;if(se==null||G==null)return;const Y=a.get(H);if(!Y||!rn(Y))return;const ae=Y.el.current;if(!ae)return;const oe=nn(F,ae,K,ee);if(oe===0)return;const{widths:he}=b.current,me=s.current.getBoundingClientRect(),_e=oe/me.width*100,fe=Ca(_e,B,se,G,b.current,I.current);he.some((je,ge)=>je!==fe[ge])&&y(fe)},e[18]=a,e[19]=A):A=e[19];const T=A;let $,D;e[20]!==a||e[21]!==l||e[22]!==d?($=()=>{b.current.elements=a,b.current.panels=l,b.current.widths=d},D=[a,l,d],e[20]=a,e[21]=l,e[22]=d,e[23]=$,e[24]=D):($=e[23],D=e[24]),h.useLayoutEffect($,D);const O=ja();let L,N;e[25]!==l||e[26]!==O?(L=()=>{const{widths:H}=b.current;if(H.length===l.length)return;const F=O.get(l);if(F){const K=an(l,F,window.innerWidth);y(K);return}const B=Aa(l);y(B)},N=[O,l],e[25]=l,e[26]=O,e[27]=L,e[28]=N):(L=e[27],N=e[28]),h.useLayoutEffect(L,N);let J,V;e[29]!==l||e[30]!==O||e[31]!==d?(J=()=>{d.length&&O.setDebounced(l,d)},V=[O,l,d],e[29]=l,e[30]=O,e[31]=d,e[32]=J,e[33]=V):(J=e[32],V=e[33]),h.useEffect(J,V);let Q,re;e[34]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>{const H=new ResizeObserver(()=>{const{panels:F,widths:B}=b.current,K=an(F,B,window.innerWidth);B.some((se,G)=>se!==K[G])&&y(K)});return H.observe(s.current),()=>{H.disconnect()}},re=[],e[34]=Q,e[35]=re):(Q=e[34],re=e[35]),h.useLayoutEffect(Q,re);let ie,W;e[36]!==f||e[37]!==T||e[38]!==w||e[39]!==E?(W={activeResizer:f,drag:T,getPanelStyle:w,registerElement:x,startDragging:E,stopDragging:k,unregisterElement:R},e[36]=f,e[37]=T,e[38]=w,e[39]=E,e[40]=W):W=e[40],ie=W;const Z=ie;let ce;e[41]!==n?(ce=u.jsx(ka,{ref:s,children:n}),e[41]=n,e[42]=ce):ce=e[42];let le;return e[43]!==Z||e[44]!==ce?(le=u.jsx($t.Provider,{value:Z,children:ce}),e[43]=Z,e[44]=ce,e[45]=le):le=e[45],le};function Ht(t){const e=z.c(37);let n,s,r,a,o;e[0]!==t?({children:n,message:s,onRetry:a,onContinueAnyway:r,...o}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a,e[5]=o):(n=e[1],s=e[2],r=e[3],a=e[4],o=e[5]);const{t:i}=ye(ve);let c;e[6]!==i?(c=i("error-card.retry-button.text"),e[6]=i,e[7]=c):c=e[7];let l;e[8]!==a||e[9]!==c?(l=u.jsx(Se,{mode:"ghost",onClick:a,text:c}),e[8]=a,e[9]=c,e[10]=l):l=e[10];const p=l;let d;e[11]!==i?(d=i("error-card.continue-button.text"),e[11]=i,e[12]=d):d=e[12];let y;e[13]!==r||e[14]!==d?(y=u.jsx(Se,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=y):y=e[15];const f=y;let v;e[16]!==i?(v=i("error-card.title"),e[16]=i,e[17]=v):v=e[17];let m;e[18]!==v?(m=u.jsx(X,{size:1,weight:"semibold",children:v}),e[18]=v,e[19]=m):m=e[19];let b;e[20]!==s?(b=u.jsx(X,{muted:!0,size:1,children:s}),e[20]=s,e[21]=b):b=e[21];let g;e[22]!==m||e[23]!==b?(g=u.jsxs(Oe,{space:3,children:[m,b]}),e[22]=m,e[23]=b,e[24]=g):g=e[24];let w;e[25]!==f||e[26]!==r||e[27]!==a||e[28]!==p?(w=a&&r?u.jsxs(Fr,{space:2,children:[p,f]}):a?u.jsx(de,{children:p}):r?u.jsx(de,{children:f}):null,e[25]=f,e[26]=r,e[27]=a,e[28]=p,e[29]=w):w=e[29];let P;e[30]!==n||e[31]!==g||e[32]!==w?(P=u.jsx(ne,{align:"center",height:"fill",justify:"center",children:u.jsx(Vr,{padding:4,sizing:"border",width:0,children:u.jsxs(Oe,{space:4,children:[g,n,w]})})}),e[30]=n,e[31]=g,e[32]=w,e[33]=P):P=e[33];let x;return e[34]!==o||e[35]!==P?(x=u.jsx(ue,{height:"fill",...o,children:P}),e[34]=o,e[35]=P,e[36]=x):x=e[36],x}function Ma(t={}){const e=Object.entries(t).map(([n,s])=>`${n}=${s}`).join("&");return e.length?`?${e}`:""}function Oa(t){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],n=Object.entries(t).filter(([s])=>e.includes(s)).reduce((s,[r,a])=>a==null?s:{...s,[r]:a},{});return Ma(n)}const La=h.forwardRef(function(t,e){const n=z.c(11);let s,r;n[0]!==t?({searchParams:r,...s}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==r?(a=Object.entries(r),n[3]=r,n[4]=a):a=n[4];let o;n[5]!==a?(o={type:void 0,_searchParams:a},n[5]=a,n[6]=o):o=n[6];let i;return n[7]!==e||n[8]!==s||n[9]!==o?(i=u.jsx(lt,{...s,ref:e,state:o,title:void 0}),n[7]=e,n[8]=s,n[9]=o,n[10]=i):i=n[10],i}),za=h.forwardRef(function(t,e){const n=z.c(15);let s,r,a,o;if(n[0]!==t){const{documentId:p,documentType:d,parentRefPath:y,template:f,searchParams:v,...m}=t;s=p,r=d,o=v,a=m,n[0]=t,n[1]=s,n[2]=r,n[3]=a,n[4]=o}else s=n[1],r=n[2],a=n[3],o=n[4];let i;n[5]!==o?(i=Object.entries(o),n[5]=o,n[6]=i):i=n[6];let c;n[7]!==s||n[8]!==r||n[9]!==i?(c={id:s,type:r,_searchParams:i},n[7]=s,n[8]=r,n[9]=i,n[10]=c):c=n[10];let l;return n[11]!==e||n[12]!==a||n[13]!==c?(l=u.jsx(lt,{...a,ref:e,state:c,title:void 0}),n[11]=e,n[12]=a,n[13]=c,n[14]=l):l=n[14],l});function Gn(t){const e=z.c(26),{children:n,onStructureParams:s,structureParams:r,searchParams:a,refs:o}=t,{state:i,resolvePathFromState:c}=kt();let l;e[0]!==i._searchParams?(l=Object.fromEntries(i._searchParams||[]),e[0]=i._searchParams,e[1]=l):l=e[1];const p=vn(l);let d;e[2]!==c||e[3]!==p||e[4]!==i?(d=I=>{const S=c(i),E=Oa({...p,...I});return`${S}${E}`},e[2]=c,e[3]=p,e[4]=i,e[5]=d):d=e[5];const y=d;let f,v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v={},e[6]=v):v=e[6];const m=r;let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[7]=b):b=e[7];let g;e[8]!==o||e[9]!==a?(g=I=>{const{childId:S,...E}=I,C=o==null?void 0:o.find(k=>k._id===S||ct(k._id)===S);return C?u.jsx(lt,{...E,state:{id:S,type:C._type,_searchParams:Object.entries(a)}}):u.jsx("div",{...E})},e[8]=o,e[9]=a,e[10]=g):g=e[10];let w,P;e[11]!==a?(w=I=>u.jsx(La,{...I,searchParams:a}),P=I=>u.jsx(za,{...I,searchParams:a}),e[11]=a,e[12]=w,e[13]=P):(w=e[12],P=e[13]);let x;e[14]!==s?(x=I=>{s({...I,inspect:I.inspect??void 0})},e[14]=s,e[15]=x):x=e[15];let j;e[16]!==y||e[17]!==m||e[18]!==g||e[19]!==w||e[20]!==P||e[21]!==x?(j={index:0,groupIndex:0,siblingIndex:0,payload:v,params:m,hasGroupSiblings:!1,groupLength:1,routerPanesState:b,ChildLink:g,BackLink:w,ReferenceChildLink:P,ParameterizedLink:Ba,closeCurrentAndAfter:Ha,handleEditReference:Va,replaceCurrent:Fa,closeCurrent:qa,duplicateCurrent:Ua,setView:Na,setParams:x,setPayload:Da,navigateIntent:Wa,createPathWithParams:y},e[16]=y,e[17]=m,e[18]=g,e[19]=w,e[20]=P,e[21]=x,e[22]=j):j=e[22],f=j;const R=f;let _;return e[23]!==n||e[24]!==R?(_=u.jsx(ds.Provider,{value:R,children:n}),e[23]=n,e[24]=R,e[25]=_):_=e[25],_}function Wa(t,e,n){console.warn("navigateIntent",t,e,n)}function Da(t){console.warn("setPayload",t)}function Na(t){console.warn("setView",t)}function Ua(t){console.warn("duplicateCurrent",t)}function qa(){console.warn("closeCurrent")}function Fa(t){console.warn("replaceCurrent",t)}function Va(t){console.warn("handleEditReference",t)}function Ha(){console.warn("closeCurrentAndAfter")}function Ba(){throw new Error("ParameterizedLink not implemented")}const Ka=pe(In)`
  height: 100%;
`,Ga=pe(ne)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,Xa=pe(rt)`
  white-space: pre-wrap;
`;function Ja(t){var S,E,C,k;const e=z.c(33),{mainDocumentState:n,onStructureParams:s,searchParams:r,refs:a}=t,{t:o}=ye(ve),{devMode:i}=Mt();let c,l;if(e[0]!==((S=n==null?void 0:n.document)==null?void 0:S._id)||e[1]!==a){let A;e[3]!==((E=n==null?void 0:n.document)==null?void 0:E._id)?(A=T=>{var $;return ct(T._id)!==(($=n==null?void 0:n.document)==null?void 0:$._id)},e[3]=(C=n==null?void 0:n.document)==null?void 0:C._id,e[4]=A):A=e[4],l=a.filter(A).map(Ya),e[0]=(k=n==null?void 0:n.document)==null?void 0:k._id,e[1]=a,e[2]=l}else l=e[2];c=l;const p=c;let d,y;e[5]!==p?(y={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=y):y=e[6];let f;e[7]!==o?(f=o("document-list-pane.document-list.title"),e[7]=o,e[8]=f):f=e[8];let v;e[9]!==y||e[10]!==f?(v={id:"$root",options:y,schemaTypeName:"",title:f,type:"documentList"},e[9]=y,e[10]=f,e[11]=v):v=e[11],d=v;const m=d,[b,g]=h.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>g(null),e[12]=w):w=e[12];const P=w,[x]=h.useState(Qa);let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=()=>g(null),e[13]=j):j=e[13];let R;if(e[14]!==a?(R=[a],e[14]=a,e[15]=R):R=e[15],h.useEffect(j,R),b){let A;e[16]!==o?(A=o("document-list-pane.error.text"),e[16]=o,e[17]=A):A=e[17];let T;e[18]!==i||e[19]!==b||e[20]!==o?(T=i&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(nt,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(Xa,{size:1,children:b.error.message})]})}),e[18]=i,e[19]=b,e[20]=o,e[21]=T):T=e[21];let $;return e[22]!==T||e[23]!==A?($=u.jsx(Ht,{flex:1,message:A,onRetry:P,children:T}),e[22]=T,e[23]=A,e[24]=$):$=e[24],$}let _;e[25]!==m?(_=u.jsx(Ga,{direction:"column",flex:1,children:u.jsx(vs,{index:0,itemId:"$root",pane:m,paneKey:"$root"})}),e[25]=m,e[26]=_):_=e[26];let I;return e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==x||e[31]!==_?(I=u.jsx(Cn,{onCatch:g,children:u.jsx(Ka,{children:u.jsx(Tn,{children:u.jsx(Gn,{onStructureParams:s,structureParams:x,searchParams:r,refs:a,children:_})})})}),e[27]=s,e[28]=a,e[29]=r,e[30]=x,e[31]=_,e[32]=I):I=e[32],I}function Qa(){return{}}function Ya(t){return ct(t._id)}const Za=pe(rt)`
  white-space: pre-wrap;
`;function eo(t){const e=z.c(35),{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i}=t,{template:c,templateParams:l}=i,{t:p}=ye(ve),{devMode:d}=Mt();let y,f;e[0]!==l?(f=us(l),e[0]=l,e[1]=f):f=e[1];let v;e[2]!==n||e[3]!==s||e[4]!==f||e[5]!==c?(v={id:n,type:s,template:c,templateParameters:f},e[2]=n,e[3]=s,e[4]=f,e[5]=c,e[6]=v):v=e[6];let m;e[7]!==n||e[8]!==v?(m={id:n,options:v,title:"",type:"document"},e[7]=n,e[8]=v,e[9]=m):m=e[9],y=m;const b=y,[g,w]=h.useState(null);let P;e[10]===Symbol.for("react.memo_cache_sentinel")?(P=()=>w(null),e[10]=P):P=e[10];const x=P;let j;e[11]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{w(null)},e[11]=j):j=e[11];let R;if(e[12]!==n||e[13]!==s||e[14]!==i?(R=[n,s,i],e[12]=n,e[13]=s,e[14]=i,e[15]=R):R=e[15],h.useEffect(j,R),g){let C;e[16]!==p?(C=p("document-pane.error.text"),e[16]=p,e[17]=C):C=e[17];let k;e[18]!==d||e[19]!==g||e[20]!==p?(k=d&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(nt,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(Za,{size:1,children:g.error.message})]})}),e[18]=d,e[19]=g,e[20]=p,e[21]=k):k=e[21];let A;return e[22]!==C||e[23]!==k?(A=u.jsx(Ht,{flex:1,message:C,onRetry:x,children:k}),e[22]=C,e[23]=k,e[24]=A):A=e[24],A}let _;e[25]===Symbol.for("react.memo_cache_sentinel")?(_={height:"100%"},e[25]=_):_=e[25];let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=u.jsx(yn,{}),e[26]=I):I=e[26];let S;e[27]!==r||e[28]!==b?(S=u.jsx(h.Suspense,{fallback:I,children:u.jsx(ps,{paneKey:"document",index:1,itemId:"document",pane:b,onFocusPath:r})}),e[27]=r,e[28]=b,e[29]=S):S=e[29];let E;return e[30]!==a||e[31]!==o||e[32]!==i||e[33]!==S?(E=u.jsx(Cn,{onCatch:w,children:u.jsx(In,{style:_,children:u.jsx(Gn,{searchParams:o,onStructureParams:a,structureParams:i,children:S})})}),e[30]=a,e[31]=o,e[32]=i,e[33]=S,e[34]=E):E=e[34],E}function to(t){const e=z.c(7),{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i}=t;let c;return e[0]!==n||e[1]!==s||e[2]!==r||e[3]!==a||e[4]!==o||e[5]!==i?(c=u.jsx(Tn,{children:u.jsx(eo,{documentId:n,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i})}),e[0]=n,e[1]=s,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=c):c=e[6],c}function no(t,e){const n=z.c(6),s=ls();let r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r={},n[0]=r):r=n[0];const[a,o]=h.useState(r);let i,c;return n[1]!==t||n[2]!==s||n[3]!==e?(i=()=>{if(!e)return;const l=fs(s,e,t,"").subscribe(p=>{o(p)});return()=>{l==null||l.unsubscribe()}},c=[s,e,t],n[1]=t,n[2]=s,n[3]=e,n[4]=i,n[5]=c):(i=n[4],c=n[5]),h.useEffect(i,c),a}function ro(t){var _,I,S,E,C,k,A,T;const e=z.c(39),{documentId:n,documentType:s,mainDocumentState:r,onFocusPath:a,onStructureParams:o,refs:i,searchParams:c,structureParams:l}=t,{t:p}=ye(ve),d=ts();let y;e[0]!==((_=r==null?void 0:r.document)==null?void 0:_._id)||e[1]!==((I=r==null?void 0:r.document)==null?void 0:I._type)||e[2]!==c?(y=$=>{var D,O;return u.jsx(lt,{...$,state:{id:(D=r==null?void 0:r.document)==null?void 0:D._id,type:(O=r==null?void 0:r.document)==null?void 0:O._type,_searchParams:Object.entries(c)}})},e[0]=(S=r==null?void 0:r.document)==null?void 0:S._id,e[1]=(E=r==null?void 0:r.document)==null?void 0:E._type,e[2]=c,e[3]=y):y=e[3];const f=y;let v,m;e[4]!==((C=r==null?void 0:r.document)==null?void 0:C._type)||e[5]!==d?(m=d.get(((k=r==null?void 0:r.document)==null?void 0:k._type)||"shoe"),e[4]=(A=r==null?void 0:r.document)==null?void 0:A._type,e[5]=d,e[6]=m):m=e[6],v=m;const b=v,g=no(((T=r==null?void 0:r.document)==null?void 0:T._id)||"",b);let w;e:{if(!(r!=null&&r.document)){w=null;break e}const $=r.document;let D;e[7]!==g.draft||e[8]!==g.published||e[9]!==$?(D=ns({value:$,published:g.published,draft:g.draft}),e[7]=g.draft,e[8]=g.published,e[9]=$,e[10]=D):D=e[10];let O;e[11]!==p?(O=p("main-document.label"),e[11]=p,e[12]=O):O=e[12];let L;e[13]!==O?(L=u.jsx(ue,{padding:1,radius:2,shadow:1,children:u.jsx(X,{muted:!0,size:0,weight:"medium",children:O})}),e[13]=O,e[14]=L):L=e[14];let N;e[15]!==b||e[16]!==D||e[17]!==L?(N=u.jsx(rs,{...D,schemaType:b,status:L}),e[15]=b,e[16]=D,e[17]=L,e[18]=N):N=e[18],w=N}const P=w;if(n&&s){let $;return e[19]!==n||e[20]!==s||e[21]!==a||e[22]!==o||e[23]!==c||e[24]!==l?($=u.jsx(to,{documentId:n,documentType:s,onFocusPath:a,onStructureParams:o,searchParams:c,structureParams:l}),e[19]=n,e[20]=s,e[21]=a,e[22]=o,e[23]=c,e[24]=l,e[25]=$):$=e[25],$}let x;e[26]!==f||e[27]!==r||e[28]!==P||e[29]!==p?(x=r&&u.jsx(ue,{padding:3,tone:r.document?"inherit":"caution",children:r.document?u.jsx(ss,{__unstable_focusRing:!0,as:f,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:P}):u.jsx(ue,{padding:2,radius:2,tone:"inherit",children:u.jsxs(ne,{gap:3,children:[u.jsx(de,{flex:"none",children:u.jsx(X,{size:1,children:u.jsx(as,{})})}),u.jsx(de,{flex:1,children:u.jsx(X,{size:1,children:u.jsx(os,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[26]=f,e[27]=r,e[28]=P,e[29]=p,e[30]=x):x=e[30];let j;e[31]!==r||e[32]!==o||e[33]!==i||e[34]!==c?(j=u.jsx(Ja,{mainDocumentState:r,onStructureParams:o,searchParams:c,refs:i}),e[31]=r,e[32]=o,e[33]=i,e[34]=c,e[35]=j):j=e[35];let R;return e[36]!==x||e[37]!==j?(R=u.jsxs(ne,{direction:"column",flex:1,height:"fill",children:[x,j]}),e[36]=x,e[37]=j,e[38]=R):R=e[38],R}function so(t){const e=z.c(2);let n;e[0]!==t?(n=()=>t||We(),e[0]=t,e[1]=n):n=e[1];const[s]=h.useState(n);return s}const ao=pe.div`
  position: relative;
`,oo=pe.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:t})=>t?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:t})=>!t&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,Xn=function(t){const e=z.c(27),{id:n,order:s,disabled:r}=t,a=r===void 0?!1:r,o=h.useRef(null),i=h.useContext($t);if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");const c=so(n),{activeResizer:l,drag:p,startDragging:d,stopDragging:y,registerElement:f,unregisterElement:v}=i,m=l===c;if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");let b;e[0]!==c||e[1]!==d?(b=T=>{d(c,T.nativeEvent)},e[0]=c,e[1]=d,e[2]=b):b=e[2];const g=b;let w;e[3]!==p||e[4]!==c?(w=T=>{p(c,T)},e[3]=p,e[4]=c,e[5]=w):w=e[5];const P=w;let x;e[6]!==y?(x=()=>{o.current.blur(),y()},e[6]=y,e[7]=x):x=e[7];const j=x;let R,_;e[8]!==a||e[9]!==m||e[10]!==P||e[11]!==j?(R=()=>{if(!m||a)return;const T=function(){const $=document.body.style,D=document.documentElement.style,{cursor:O}=D,{userSelect:L}=$;return D.cursor="ew-resize",$.userSelect="none",()=>{O?D.cursor=O:D.removeProperty("cursor"),L?$.userSelect=L:$.removeProperty("user-select")}}();return window.addEventListener("mousemove",P),window.addEventListener("mouseup",j),window.addEventListener("contextmenu",j),()=>{T(),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",j),window.removeEventListener("contextmenu",j)}},_=[a,m,P,j],e[8]=a,e[9]=m,e[10]=P,e[11]=j,e[12]=R,e[13]=_):(R=e[12],_=e[13]),h.useEffect(R,_);let I,S;e[14]!==c||e[15]!==s||e[16]!==f||e[17]!==v?(I=()=>(f(c,{id:c,order:s,type:"resizer",el:o}),()=>{v(c)}),S=[c,s,f,v],e[14]=c,e[15]=s,e[16]=f,e[17]=v,e[18]=I,e[19]=S):(I=e[18],S=e[19]),h.useLayoutEffect(I,S);let E,C;e[20]===Symbol.for("react.memo_cache_sentinel")?(C=u.jsx("span",{}),E=u.jsx("span",{}),e[20]=E,e[21]=C):(E=e[20],C=e[21]);let k;e[22]!==a?(k=u.jsxs(oo,{$disabled:a,children:[C,E]}),e[22]=a,e[23]=k):k=e[23];let A;return e[24]!==g||e[25]!==k?(A=u.jsx(ao,{onMouseDown:g,ref:o,children:k}),e[24]=g,e[25]=k,e[26]=A):A=e[26],A},io=t=>{const e=z.c(8),{documentId:n,setDisplayedDocument:s,getCommentIntent:r}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(Xn,{order:4}),e[0]=a):a=e[0];let o;e[1]!==r||e[2]!==t.children?(o=u.jsx(Dr,{getIntent:r,children:t.children}),e[1]=r,e[2]=t.children,e[3]=o):o=e[3];let i;return e[4]!==n||e[5]!==s||e[6]!==o?(i=u.jsxs(u.Fragment,{children:[a,u.jsx(Vt,{id:"content",minWidth:325,order:5,children:u.jsx(xs,{documentId:n,setDisplayedDocument:s,children:o})})]}),e[4]=n,e[5]=s,e[6]=o,e[7]=i):i=e[7],i},co=t=>{const e=z.c(14),{documentId:n,documentsOnPage:s,documentType:r,getCommentIntent:a,mainDocumentState:o,onFocusPath:i,onStructureParams:c,searchParams:l,setDisplayedDocument:p,structureParams:d}=t;let y;e[0]!==n||e[1]!==r||e[2]!==s||e[3]!==o||e[4]!==i||e[5]!==c||e[6]!==l||e[7]!==d?(y=u.jsx(ro,{documentId:n,documentType:r,mainDocumentState:o,onFocusPath:i,onStructureParams:c,refs:s,searchParams:l,structureParams:d}),e[0]=n,e[1]=r,e[2]=s,e[3]=o,e[4]=i,e[5]=c,e[6]=l,e[7]=d,e[8]=y):y=e[8];let f;return e[9]!==n||e[10]!==a||e[11]!==p||e[12]!==y?(f=u.jsx(io,{documentId:n,getCommentIntent:a,setDisplayedDocument:p,children:y}),e[9]=n,e[10]=a,e[11]=p,e[12]=y,e[13]=f):f=e[13],f},lo=function(t){const e=z.c(5),{children:n,navigate:s}=t;let r;e[0]!==s?(r=(i,c)=>{s((c===void 0?void 0:c)||{},i?{preview:i}:{})},e[0]=s,e[1]=r):r=e[1];const a=r;let o;return e[2]!==n||e[3]!==a?(o=u.jsx($r.Provider,{value:a,children:n}),e[2]=n,e[3]=a,e[4]=o):o=e[4],o};function uo(t,e){const n=z.c(9);let s;n[0]!==e||n[1]!==t?(s=()=>JSON.parse(localStorage.getItem(t)??JSON.stringify(e)),n[0]=e,n[1]=t,n[2]=s):s=n[2];const[r,a]=h.useState(s);let o,i;n[3]!==t||n[4]!==r?(o=()=>{localStorage.setItem(t,JSON.stringify(r))},i=[t,r],n[3]=t,n[4]=r,n[5]=o,n[6]=i):(o=n[5],i=n[6]),h.useEffect(o,i);let c;return n[7]!==r?(c=[r,a],n[7]=r,n[8]=c):c=n[8],c}function po(t){const e=z.c(11),{unstable_navigator:n}=t,s=!!(n!=null&&n.component),[r,a]=uo("presentation/navigator",s),o=s?r:!1;let i;e:{if(!s){i=void 0;break e}let f;e[0]!==a?(f=()=>a(fo),e[0]=a,e[1]=f):f=e[1],i=f}const c=i;let l;e[2]!==o||e[3]!==n?(l=function(){return u.jsx(u.Fragment,{children:o&&u.jsx(mo,{...n})})},e[2]=o,e[3]=n,e[4]=l):l=e[4];const p=l;let d;e[5]!==o||e[6]!==c?(d={navigatorEnabled:o,toggleNavigator:c},e[5]=o,e[6]=c,e[7]=d):d=e[7];let y;return e[8]!==p||e[9]!==d?(y=[d,p],e[8]=p,e[9]=d,e[10]=y):y=e[10],y}function fo(t){return!t}function ho(t){const e=z.c(11),{minWidth:n,maxWidth:s,component:r}=t,a=n!=null&&s!=null&&n===s;let o;e[0]!==r?(o=u.jsx(r,{}),e[0]=r,e[1]=o):o=e[1];let i;e[2]!==s||e[3]!==n||e[4]!==o?(i=u.jsx(Vt,{id:"navigator",minWidth:n,maxWidth:s,order:1,children:o}),e[2]=s,e[3]=n,e[4]=o,e[5]=i):i=e[5];let c;e[6]!==a?(c=u.jsx(Xn,{order:2,disabled:a}),e[6]=a,e[7]=c):c=e[7];let l;return e[8]!==i||e[9]!==c?(l=u.jsxs(u.Fragment,{children:[i,c]}),e[8]=i,e[9]=c,e[10]=l):l=e[10],l}const mo=h.memo(ho),go=function(t){const e=z.c(3),{children:n,params:s}=t;let r;r=s;const a=r;let o;return e[0]!==n||e[1]!==a?(o=u.jsx(Mr.Provider,{value:a,children:n}),e[0]=n,e[1]=a,e[2]=o):o=e[2],o},yo=function(t){const e=z.c(10),{children:n,devMode:s,name:r,navigate:a,params:o,searchParams:i,structureParams:c}=t;let l,p;e[0]!==s||e[1]!==r||e[2]!==a||e[3]!==o||e[4]!==i||e[5]!==c?(p={devMode:s,name:r,navigate:a,params:o,searchParams:i,structureParams:c},e[0]=s,e[1]=r,e[2]=a,e[3]=o,e[4]=i,e[5]=c,e[6]=p):p=e[6],l=p;const d=l;let y;return e[7]!==n||e[8]!==d?(y=u.jsx(kr.Provider,{value:d,children:n}),e[7]=n,e[8]=d,e[9]=y):y=e[9],y};function Bt(t){return Array.isArray(t)?t.join(","):t}const vo=Xe.create(pe.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),bo=pe(de)`
  position: absolute;
  inset: 0;
  background: transparent;
`,wo=h.forwardRef(function(t,e){const n=z.c(16),{animate:s,initial:r,onLoad:a,preventClick:o,src:i,variants:c,style:l}=t,p=`presentation-tool-iframe-${h.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;n[0]!==l||n[1]!==p?(d={...l,viewTransitionName:p},n[0]=l,n[1]=p,n[2]=d):d=n[2];let y;n[3]!==s||n[4]!==r||n[5]!==a||n[6]!==e||n[7]!==i||n[8]!==d||n[9]!==c?(y=u.jsx(vo,{style:d,animate:s,initial:r,onLoad:a,ref:e,src:i,variants:c}),n[3]=s,n[4]=r,n[5]=a,n[6]=e,n[7]=i,n[8]=d,n[9]=c,n[10]=y):y=n[10];let f;n[11]!==o?(f=o&&u.jsx(bo,{}),n[11]=o,n[12]=f):f=n[12];let v;return n[13]!==y||n[14]!==f?(v=u.jsxs(u.Fragment,{children:[y,f]}),n[13]=y,n[14]=f,n[15]=v):v=n[15],v});function xo(t){const e=z.c(16),{openPopup:n,previewLocationOrigin:s,previewLocationRoute:r}=t,{t:a}=ye(ve);let o;e[0]!==n?(o=m=>{m.preventDefault(),n(m.currentTarget.href)},e[0]=n,e[1]=o):o=e[1];const i=o;let c;e[2]!==a?(c=a("share-url.menu-item.open.text"),e[2]=a,e[3]=c):c=e[3];let l;e[4]!==c?(l=u.jsx(X,{size:1,children:c}),e[4]=c,e[5]=l):l=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=["bottom-start"],e[6]=p):p=e[6];let d;e[7]!==a?(d=a("share-url.menu-item.open.text"),e[7]=a,e[8]=d):d=e[8];const y=`${s}${r}`;let f;e[9]!==i||e[10]!==d||e[11]!==y?(f=u.jsx(Se,{as:"a","aria-label":d,icon:hs,mode:"bleed",href:y,rel:"opener",target:"_blank",tooltipProps:null,onClick:i}),e[9]=i,e[10]=d,e[11]=y,e[12]=f):f=e[12];let v;return e[13]!==l||e[14]!==f?(v=u.jsx(Fe,{animate:!0,content:l,fallbackPlacements:p,placement:"bottom",portal:!0,children:f}),e[13]=l,e[14]=f,e[15]=v):v=e[15],v}const Po=function(t){var L;const e=z.c(27),{fontSize:n,onChange:s,origin:r,padding:a,prefix:o,suffix:i,value:c}=t,l=n===void 0?1:n,p=a===void 0?3:a,{t:d}=ye(ve),{basePath:y}=((L=xn())==null?void 0:L.activeWorkspace)||{},f=y===void 0?"/":y,v=h.useRef(null),[m,b]=h.useState(void 0),[g,w]=h.useState(void 0);let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=N=>{b(N.currentTarget.value)},e[0]=P):P=e[0];const x=P;let j;e[1]!==f||e[2]!==s||e[3]!==r||e[4]!==m||e[5]!==d?(j=N=>{var J;if(N.key==="Enter"){if(m===void 0)return;const V=m.startsWith("/")||m===""?`${r}${m}`:m;if(!V.startsWith(`${r}/`)&&V!==r){w(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(V.startsWith(`${f}/`)||V===f)){w(d("preview-location-input.error",{basePath:f,context:"same-base-path"}));return}const Q=V===r?`${r}/`:V;w(void 0),b(void 0),s(Q.slice(r.length)),(J=v.current)==null||J.blur()}N.key==="Escape"&&(w(void 0),b(void 0))},e[1]=f,e[2]=s,e[3]=r,e[4]=m,e[5]=d,e[6]=j):j=e[6];const R=j;let _;e[7]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{w(void 0),b(void 0)},e[7]=_):_=e[7];const I=_;let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{w(void 0),b(void 0)},e[8]=S):S=e[8];let E;e[9]!==r||e[10]!==c?(E=[r,c],e[9]=r,e[10]=c,e[11]=E):E=e[11],h.useEffect(S,E);let C,k;e[12]===Symbol.for("react.memo_cache_sentinel")?(k={icon:ms},e[12]=k):k=e[12],C=k;const A=g?C:void 0;let T;e[13]!==r||e[14]!==c?(T=()=>{w(void 0),b(r+c)},e[13]=r,e[14]=c,e[15]=T):T=e[15];let $;e[16]===Symbol.for("react.memo_cache_sentinel")?($={zIndex:1},e[16]=$):$=e[16];const D=m===void 0?`${r}${c}`:m;let O;return e[17]!==g||e[18]!==l||e[19]!==R||e[20]!==p||e[21]!==o||e[22]!==i||e[23]!==A||e[24]!==T||e[25]!==D?(O=u.jsx(u.Fragment,{children:u.jsx(cs,{clearButton:A,customValidity:g,fontSize:l,onBlur:I,onClear:T,onChange:x,onKeyDownCapture:R,padding:p,prefix:o,style:$,radius:2,ref:v,space:p,suffix:i,value:D})}),e[17]=g,e[18]=l,e[19]=R,e[20]=p,e[21]=o,e[22]=i,e[23]=A,e[24]=T,e[25]=D,e[26]=O):O=e[26],O},So=h.lazy(()=>ke(()=>import("./QRCodeSVG-D83XW4SH.js"),__vite__mapDeps([0,1]))),jt=24,_o=16,jo=224,Eo=pe(gs)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${jt}px;
  width: ${jt}px;
`,Ro=Xe.create(tt),To=Xe.create(X),Co=Xe.create(Eo),Jn=h.memo(function(t){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:n,initialUrl:s,previewLocationRoute:r,perspective:a}=t,{t:o}=ye(ve),{push:i}=gn(),c=Ke({apiVersion:Ge}),l=Ot(),[p,d]=h.useState(!0),[y,f]=h.useState(!1),[v,m]=h.useState(!1),[b,g]=h.useState(null),w=y||v||p,P=h.useMemo(()=>b?na(s,b,r,Bt(a)):null,[s,a,r,b]),[x,j]=h.useState(null);if(x)throw x;const R=h.useCallback(()=>{i({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[i,o]),_=h.useCallback(async()=>{try{m(!0),await sa(c,"@sanity/presentation",typeof window>"u"?"":location.href,l==null?void 0:l.id),g(null)}catch(E){j(E)}finally{m(!1)}},[c,l==null?void 0:l.id]),I=h.useCallback(async()=>{try{f(!0);const E=await ra(c,"@sanity/presentation",typeof window>"u"?"":location.href,l==null?void 0:l.id);g(E.secret)}catch(E){j(E)}finally{f(!1)}},[c,l==null?void 0:l.id]),S=h.useCallback(()=>{try{if(!P)throw new Error("No URL to copy");navigator.clipboard.writeText(P.toString()),i({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})}catch(E){j(E)}},[i,o,P]);return h.useEffect(()=>{let E=new AbortController,C=[];async function k(T,$){const{result:D,syncTags:O}=await c.fetch(is,{},{filterResponse:!1,lastLiveEventId:T,tag:"presentation.fetch-shared-access-secret"});Array.isArray(O)&&(C=O),$.aborted||g(D)}const A=c.live.events().subscribe({next:T=>{T.type==="message"&&(E.abort(),E=new AbortController,T.tags.some($=>C.includes($))&&k(T.id,E.signal))},error:j});return k(null,E.signal).finally(()=>d(!1)),()=>{A.unsubscribe(),E.abort()}},[c]),u.jsx(Hr,{button:u.jsx(Se,{"aria-label":o("preview-frame.share-button.aria-label"),icon:Qr,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:u.jsx(Br,{style:{maxWidth:248},padding:n?void 0:0,children:n?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(Kr,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(Fe,{animate:!0,content:u.jsx(X,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:P?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(_n,{checked:y||P!==null&&!v,readOnly:y||v,indeterminate:p,onChange:e?P?_:I:R})}),u.jsx(X,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(X,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(de,{padding:3,paddingTop:2,children:u.jsxs(Oe,{space:3,children:[u.jsx(ue,{tone:w||!P?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(Sn,{children:w?u.jsx(Ro,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):P?u.jsx(u.Fragment,{children:u.jsxs(h.Suspense,{fallback:u.jsx(tt,{}),children:[u.jsx(So,{title:o("share-preview-menu.qr-code.title",{url:P.toString()}),value:P.toString(),size:jo,color:"var(--card-fg-color)",logoSize:jt+_o}),u.jsx(Co,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(To,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(X,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(Gr,{}),u.jsx(Xr,{disabled:!P||v,icon:Jr,onClick:S,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(ue,{padding:2,tone:"caution",radius:3,children:u.jsx(X,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});Jn.displayName="Memo(SharePreviewMenu)";const Io=t=>{const e=z.c(97),{canSharePreviewAccess:n,canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,dispatch:a,iframe:o,iframeRef:i,initialUrl:c,navigatorEnabled:l,onPathChange:p,onRefresh:d,openPopup:y,overlaysConnection:f,perspective:v,previewUrl:m,setViewport:b,targetOrigin:g,toggleNavigator:w,toggleOverlay:P,viewport:x,visualEditing:j}=t,{overlaysEnabled:R}=j,{t:_}=ye(ve);let I;e[0]!==b||e[1]!==x?(I=()=>b(x==="desktop"?"mobile":"desktop"),e[0]=b,e[1]=x,e[2]=I):I=e[2];const S=I;let E;E=g===location.origin?"":g;const C=E;let k;e[3]!==a||e[4]!==i.current||e[5]!==d||e[6]!==m||e[7]!==g?(k=()=>{d(()=>{i.current&&(a({type:Pn}),Object.assign(i.current,{src:`${g}${m||"/"}`}))})},e[3]=a,e[4]=i.current,e[5]=d,e[6]=m,e[7]=g,e[8]=k):k=e[8];const A=k;let T;const $=new URL(m||"/",g),{pathname:D,search:O}=ta($);T=`${D}${O}`;const L=T;let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N={width:"100%"},e[9]=N):N=e[9];let J;e[10]!==l||e[11]!==_||e[12]!==w?(J=w&&u.jsx(Se,{"aria-label":_("preview-frame.navigator.toggle-button.aria-label"),icon:Nr,mode:"bleed",onClick:w,selected:l,tooltipProps:{content:u.jsx(X,{size:1,children:_("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=l,e[11]=_,e[12]=w,e[13]=J):J=e[13];let V;e[14]===Symbol.for("react.memo_cache_sentinel")?(V={whiteSpace:"nowrap"},e[14]=V):V=e[14];const Q=R?"disable":"enable";let re;e[15]!==_||e[16]!==Q?(re=_("preview-frame.overlay.toggle-button.tooltip",{context:Q}),e[15]=_,e[16]=Q,e[17]=re):re=e[17];let ie;e[18]!==re?(ie=u.jsx(de,{padding:1,children:u.jsx(X,{size:1,children:re})}),e[18]=re,e[19]=ie):ie=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=u.jsx(de,{paddingY:1,children:u.jsx(Yr,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=W):W=e[20];let Z;e[21]!==ie?(Z=u.jsxs(ne,{align:"center",style:V,children:[ie,W]}),e[21]=ie,e[22]=Z):Z=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=["bottom-start"],e[23]=ce):ce=e[23];let le;e[24]===Symbol.for("react.memo_cache_sentinel")?(le={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=le):le=e[24];const H=R?"transparent":void 0;let F;e[25]===Symbol.for("react.memo_cache_sentinel")?(F={margin:-4},e[25]=F):F=e[25];const B=o.status==="loading"||f!=="connected";let K;e[26]!==R||e[27]!==B||e[28]!==P?(K=u.jsx("div",{style:F,children:u.jsx(_n,{checked:R,onChange:P,disabled:B})}),e[26]=R,e[27]=B,e[28]=P,e[29]=K):K=e[29];const se=!R;let G;e[30]!==_?(G=_("preview-frame.overlay.toggle-button.text"),e[30]=_,e[31]=G):G=e[31];let ee;e[32]!==se||e[33]!==G?(ee=u.jsx(de,{children:u.jsx(X,{muted:se,size:1,weight:"medium",children:G})}),e[32]=se,e[33]=G,e[34]=ee):ee=e[34];let Y;e[35]!==K||e[36]!==ee?(Y=u.jsxs(ne,{align:"center",gap:3,children:[K,ee]}),e[35]=K,e[36]=ee,e[37]=Y):Y=e[37];let ae;e[38]!==H||e[39]!==Y?(ae=u.jsx(ue,{as:"label",flex:"none",padding:3,marginX:1,style:le,tone:H,children:Y}),e[38]=H,e[39]=Y,e[40]=ae):ae=e[40];let oe;e[41]!==Z||e[42]!==ae?(oe=u.jsx(Fe,{animate:!0,content:Z,fallbackPlacements:ce,placement:"bottom",portal:!0,children:ae}),e[41]=Z,e[42]=ae,e[43]=oe):oe=e[43];let he;e[44]!==o.status||e[45]!==_?(he=o.status==="loaded"?_("preview-frame.refresh-button.tooltip"):_("preview-frame.status",{context:o.status}),e[44]=o.status,e[45]=_,e[46]=he):he=e[46];let me;e[47]!==he?(me=u.jsx(X,{size:1,children:he}),e[47]=he,e[48]=me):me=e[48];let _e;e[49]===Symbol.for("react.memo_cache_sentinel")?(_e=["bottom-end"],e[49]=_e):_e=e[49];let fe;e[50]!==_?(fe=_("preview-frame.refresh-button.aria-label"),e[50]=_,e[51]=fe):fe=e[51];const je=o.status==="reloading"||o.status==="refreshing";let ge;e[52]!==A||e[53]!==fe||e[54]!==je?(ge=u.jsx(Se,{"aria-label":fe,icon:Zr,mode:"bleed",loading:je,onClick:A,tooltipProps:null}),e[52]=A,e[53]=fe,e[54]=je,e[55]=ge):ge=e[55];let Ee;e[56]!==me||e[57]!==ge?(Ee=u.jsx(de,{padding:1,children:u.jsx(Fe,{animate:!0,content:me,fallbackPlacements:_e,placement:"bottom",portal:!0,children:ge})}),e[56]=me,e[57]=ge,e[58]=Ee):Ee=e[58];let be;e[59]!==y||e[60]!==C||e[61]!==L?(be=u.jsx(de,{padding:1,children:u.jsx(xo,{openPopup:y,previewLocationOrigin:C,previewLocationRoute:L})}),e[59]=y,e[60]=C,e[61]=L,e[62]=be):be=e[62];let Re;e[63]!==p||e[64]!==C||e[65]!==L||e[66]!==Ee||e[67]!==be?(Re=u.jsx(de,{flex:1,children:u.jsx(Po,{prefix:Ee,onChange:p,origin:C,suffix:be,value:L})}),e[63]=p,e[64]=C,e[65]=L,e[66]=Ee,e[67]=be,e[68]=Re):Re=e[68];const Le=x==="desktop"?"narrow":"full";let Te;e[69]!==_||e[70]!==Le?(Te=_("preview-frame.viewport-button.tooltip",{context:Le}),e[69]=_,e[70]=Le,e[71]=Te):Te=e[71];let Ce;e[72]!==Te?(Ce=u.jsx(X,{size:1,children:Te}),e[72]=Te,e[73]=Ce):Ce=e[73];let $e;e[74]===Symbol.for("react.memo_cache_sentinel")?($e=["bottom-start"],e[74]=$e):$e=e[74];let we;e[75]!==_?(we=_("preview-frame.viewport-button.aria-label"),e[75]=_,e[76]=we):we=e[76];const ze=x==="desktop"?Ur:qr;let xe;e[77]!==we||e[78]!==ze||e[79]!==S?(xe=u.jsx(Se,{"aria-label":we,icon:ze,mode:"bleed",onClick:S,tooltipProps:null}),e[77]=we,e[78]=ze,e[79]=S,e[80]=xe):xe=e[80];let Pe;e[81]!==Ce||e[82]!==xe?(Pe=u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(Fe,{animate:!0,content:Ce,fallbackPlacements:$e,placement:"bottom",portal:!0,children:xe})}),e[81]=Ce,e[82]=xe,e[83]=Pe):Pe=e[83];let M;e[84]!==n||e[85]!==s||e[86]!==r||e[87]!==c||e[88]!==v||e[89]!==L?(M=n&&u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(Jn,{canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,previewLocationRoute:L,initialUrl:c,perspective:v})}),e[84]=n,e[85]=s,e[86]=r,e[87]=c,e[88]=v,e[89]=L,e[90]=M):M=e[90];let q;return e[91]!==oe||e[92]!==Re||e[93]!==Pe||e[94]!==M||e[95]!==J?(q=u.jsxs(ne,{align:"center",gap:1,paddingX:1,style:N,children:[J,oe,Re,Pe,M]}),e[91]=oe,e[92]=Re,e[93]=Pe,e[94]=M,e[95]=J,e[96]=q):q=e[96],q};function Ao(t){var l;const e=z.c(7),n=ko,s=(l=t.options)==null?void 0:l.component;let r;e[0]!==s||e[1]!==t?(r=s?u.jsx(s,{...t,renderDefault:n}):n(t),e[0]=s,e[1]=t,e[2]=r):r=e[2];const a=r;let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o={position:"relative"},e[3]=o):o=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i={minHeight:0},e[4]=i):i=e[4];let c;return e[5]!==a?(c=u.jsx(ue,{flex:"none",padding:2,borderBottom:!0,style:o,children:u.jsx(ne,{align:"center",style:i,children:a})}),e[5]=a,e[6]=c):c=e[6],c}function ko(t){return u.jsx(Io,{...t})}function $o(t){const e=z.c(2);let n;return e[0]!==t?(n=()=>u.jsx(Ao,{...t}),e[0]=t,e[1]=n):n=e[1],n}const vt=Xe.create(ne),Qn=h.memo(h.forwardRef(function(t,e){const{dispatch:n,iframe:s,header:r,initialUrl:a,loadersConnection:o,overlaysConnection:i,perspective:c,viewport:l,vercelProtectionBypass:p}=t,[d,y]=h.useState(null),f=Bt(d===null?c:d),v=h.useMemo(()=>{const W=new URL(a);return W.searchParams.get(Ve)||W.searchParams.set(Ve,f),(p||W.searchParams.get(Ue))&&W.searchParams.set(Ct,"samesitenone"),p&&!W.searchParams.get(Ue)&&W.searchParams.set(Ue,p),W},[a,f,p]);h.useEffect(()=>{o==="connected"&&y(W=>W===null?c:W)},[o,c]);const{t:m}=ye(ve),{devMode:b}=Mt(),g=Lr(),w=h.useRef(null),P=$o({...t,iframeRef:w,options:r});h.useImperativeHandle(e,()=>w.current);const x=s.status==="loading"||s.status==="reloading",[j,R]=h.useState(!1),_=s.status==="refreshing",[I,S]=h.useState(!1),E=x||_||i==="connecting",C=h.useCallback(()=>{w.current&&(w.current.src=v.toString(),n({type:Pn}))},[n,v]),k=h.useCallback(()=>{T(!0)},[]),[A,T]=h.useState(!1),[$,D]=h.useState(!1);h.useEffect(()=>{if(!(x||_)&&(i==="connecting"||i==="reconnecting")){const W=setTimeout(()=>{D(!0)},5e3);return()=>clearTimeout(W)}},[i,x,_]),h.useEffect(()=>{if(!(x||_||!$)){if(i==="connected"&&(S(!1),D(!1),R(!1),T(!1)),i==="connecting"){const W=setTimeout(()=>{R(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},Xt);return()=>clearTimeout(W)}if(i==="reconnecting"){const W=setTimeout(()=>{R(!0),S(!0)},Xt);return()=>clearTimeout(W)}}},[x,i,_,$]);const O=h.useCallback(()=>{n({type:wn})},[n]);h.useEffect(()=>{if(!w.current)return;const W=w.current;function Z(){W===document.activeElement&&W.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",Z),()=>{window.removeEventListener("blur",Z)}},[]);const L=h.useMemo(()=>(x||i==="connecting"&&s.status!=="refreshing")&&!A,[A,s.status,x,i]),N=h.useSyncExternalStore(h.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),J=h.useMemo(()=>[L?"background":"active",x?"reloading":"idle",N?"":l,$&&!A?"timedOut":""],[N,A,x,L,$,l]),[V,Q]=h.useState(l),[re,ie]=h.useState(bt[l]);return h.useEffect(()=>{if(N&&l!==V){const W=()=>{Q(l),ie(bt[l])};!g&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>zr.flushSync(()=>W())):W()}},[N,g,V,l]),u.jsx(Ss,{transition:g?{duration:0}:void 0,children:u.jsxs(Wr,{children:[u.jsx(P,{}),u.jsx(ue,{flex:1,tone:"transparent",children:u.jsxs(ne,{align:"center",height:"fill",justify:"center",padding:(N?V:l)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:E?"wait":void 0},children:[u.jsx(Sn,{children:!I&&!x&&!_&&$&&!A?u.jsx(vt,{initial:"initial",animate:"animate",exit:"exit",variants:on,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:j?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:j?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(ne,{style:{...it[l]},justify:"center",align:"center",direction:"column",gap:4,children:[j&&u.jsx(Se,{disabled:!0,mode:"ghost",text:m("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(ue,{radius:2,tone:j?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(ne,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(tt,{muted:!0}),u.jsx(X,{muted:!0,size:1,children:j?m("preview-frame.status",{context:"timeout"}):m("preview-frame.status",{context:"connecting"})})]})}),j&&u.jsx(Se,{tone:"critical",onClick:k,text:m("preview-frame.continue-button.text")})]})}):(x||i==="connecting"&&s.status!=="refreshing")&&!A?u.jsx(vt,{initial:"initial",animate:"animate",exit:"exit",variants:on,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(ne,{style:{...it[l]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(tt,{muted:!0}),u.jsx(X,{muted:!0,size:1,children:m("preview-frame.status",{context:"loading"})})]})}):I&&!A?u.jsx(vt,{initial:"initial",animate:"animate",exit:"exit",variants:Mo,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(Ht,{flex:1,message:m("preview-frame.connection.error.text"),onRetry:C,onContinueAnyway:k,children:b&&u.jsxs(u.Fragment,{children:[i!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(nt,{muted:!0,size:0,children:m("preview-frame.overlay.connection-status.label")}),u.jsx(rt,{size:1,children:m("channel.status",{context:i})})]})}),o!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(nt,{muted:!0,size:0,children:m("preview-frame.loader.connection-status.label")}),u.jsx(rt,{size:1,children:m("channel.status",{context:o})})]})})]})})}):null}),u.jsx(wo,{animate:J,initial:["background"],onLoad:O,preventClick:L,ref:w,src:v.toString(),style:re,variants:bt})]})})]})})}));Qn.displayName="Memo(ForwardRef(Preview))";const it={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},on={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},Mo={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},bt={desktop:{...it.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...it.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function Oo(){let t=!1;return(...e)=>{t||(console.warn(...e),t=!0)}}const Lo=Oo();function zo(t,e){Ir(t);const[n,s]=h.useState({}),[r,a]=h.useState({}),o=h.useRef(""),i=h.useCallback((c,l,p=[])=>{const d=p.filter(y=>"_projectId"in y&&y._projectId?(Lo("Cross dataset references are not supported yet, ignoring source document",y),!1):y);(l==="published"?s:a)(y=>{const f={};for(const m of d)f[m._id]=m;if(o.current!==e.current.url)return o.current=e.current.url,{[c]:f};const v=y[c];return ws(v,f)?y:{...y,[c]:f}})},[e]);return[h.useMemo(()=>{const c=Object.values(t==="published"?n:r).reduce((l,p)=>(Object.values(p).forEach(d=>{l[d._id]=d}),l),{});return Object.values(c)},[t,r,n]),i]}function Yn(t,e){return t instanceof Function?t(e):t}function Wo(t,e){var n;if(t.resolve){const s=(n=t.resolve(e))==null?void 0:n.filter;return s?`// groq
*[${s}][0]{_id, _type}`:void 0}return"type"in t?`// groq
*[_type == "${t.type}"][0]{_id, _type}`:`// groq
*[${Yn(t.filter,e)}][0]{_id, _type}`}function Do(t,e){var n;return t.resolve?((n=t.resolve(e))==null?void 0:n.params)??e.params:"type"in t?{}:Yn(t.params,e)??e.params}function No(t,e){const n=Array.isArray(t)?t:[t];for(t of n){let s,r=t;if(typeof t=="string")try{const a=new URL(t);s=a.origin,r=a.pathname}catch{}if(!(s&&e.origin!==s))try{const a=ia(r,{decode:decodeURIComponent})(e.pathname);if(a){const{params:o,path:i}=a;return{origin:s,params:o,path:i}}}catch{throw new Error(`"${t}" is not a valid route pattern`)}}}function Uo(t){var f,v;const{navigate:e,navigationHistory:n,path:s,previewUrl:r,resolvers:a=[]}=t,{state:o}=kt(),i=Ke({apiVersion:Ge}),c=s||((v=(f=o._searchParams)==null?void 0:f.find(([m])=>m==="preview"))==null?void 0:v[1])||"",[l,p]=h.useState(void 0),d=h.useRef(void 0),y=bn((m,b)=>{var g,w;(!m||d.current!==m._id)&&(p({document:m,path:b.pathname}),d.current=m==null?void 0:m._id,((g=n.at(-1))==null?void 0:g.id)===((w=n.at(-2))==null?void 0:w.id)&&(e==null||e({id:m==null?void 0:m._id,type:m==null?void 0:m._type})))});return h.useEffect(()=>{const m=typeof r=="string"?r:typeof r=="object"&&(r==null?void 0:r.origin)||location.origin,b=new URL(c,m);if(a.length){let g;for(const w of a){const P=No(w.route,b);if(P){g={context:P,resolver:w};break}}if(g){const w=Wo(g.resolver,g.context),P=Do(g.resolver,g.context);if(w){const x=new AbortController,j={perspective:"previewDrafts",signal:x.signal};return i.fetch(w,P,j).then(R=>y(R,b)).catch(R=>{R instanceof Error&&R.name==="AbortError"||(p({document:void 0,path:b.pathname}),d.current=void 0)}),()=>{x.abort()}}}}p(void 0),d.current=void 0},[i,y,r,c,a]),l}const qo=jn(Lt(),Rn(1));En(qo);const Fo=/^([\w-]+):(0|[1-9][0-9]*)$/,Vo=/^([\w-]+):([0-9]+),([0-9]+)$/,Ho=/^([\w-]+):([\w-]+)$/;function Bo(t){const e=[];for(const n of t.split(".")){const s=Fo.exec(n);if(s){e.push(s[1],Number(s[2]));continue}const r=Vo.exec(n);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const a=Ho.exec(n);if(a){e.push(a[1],{_key:a[2]});continue}e.push(n)}return e}const cn=jn(Lt(),Rn(1));es({origin:cn,href:cn,data:En(ys(Lt(),bs()))});function Ko(t){var n;if(t===void 0)return;const e=(n=decodeURIComponent(t))==null?void 0:n.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function Go(t){if(t!==void 0)return $n.toString(Bo(decodeURIComponent(t)))}function Xo(t){return{id:Ko(t.id),path:Go(t.path),type:t.type}}function et(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function Jo({initialPreviewUrl:t,routerNavigate:e,routerState:n,routerSearchParams:s,frameStateRef:r}){const a=h.useMemo(()=>{const{id:d,path:y,type:f}=Xo(n);return{id:d,type:f,path:y,preview:s.preview||`${t.pathname}${t.search}`,perspective:s.perspective,viewport:s.viewport,inspect:s.inspect,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}},[n,s,t]),o=h.useMemo(()=>et({inspect:a.inspect,path:a.path,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}),[a.changesInspectorTab,a.comment,a.inspect,a.instruction,a.path,a.pathKey,a.rev,a.since,a.template,a.templateParams,a.view]),i=h.useMemo(()=>et({perspective:a.perspective,preview:a.preview,viewport:a.viewport}),[a.perspective,a.preview,a.viewport]),c=h.useRef(n);h.useEffect(()=>{c.current=n},[n]);const[l,p]=h.useState([n]);return{navigate:h.useCallback((d,y={},f)=>{d.id&&(d.id=ct(d.id));const{_searchParams:v,...m}=c.current,b=(v||[]).reduce((x,[j,R])=>(x[j]=R,x),{}),g=et({...m,...d}),w=et({...b,...y});m.id!==g.id&&(delete w.template,delete w.templateParams),g._searchParams=Object.entries(w).reduce((x,[j,R])=>[...x,[j,R]],[]);const P=f??w.preview===r.current.url;p(x=>[...x,g]),e(g,{replace:P})},[e,r]),navigationHistory:l,params:a,searchParams:i,structureParams:o}}const Qo=t=>{const[e,n]=h.useState(()=>new Set),s=h.useCallback(r=>{const a=window.open(r,"_blank");a&&n(o=>new Set(o).add(a))},[]);return h.useEffect(()=>{const r=[];if(e.size&&t)for(const a of e)a&&"closed"in a&&!a.closed&&r.push(t.addTarget(a));return()=>{r.forEach(a=>a())}},[t,e]),h.useEffect(()=>{if(e.size){const r=setInterval(()=>{const a=new Set;for(const o of e)o&&"closed"in o&&o.closed&&a.add(o);a.size&&n(o=>{const i=new Set(o);for(const c of a)i.delete(c);return i})},Ar);return()=>{clearInterval(r)}}},[e]),{popups:e,open:s}};function Yo(t,e,n,s,r){var d,y;const a=Ke({apiVersion:Ge}),o=xn(),i=((d=o==null?void 0:o.activeWorkspace)==null?void 0:d.basePath)||"/",c=((y=o==null?void 0:o.activeWorkspace)==null?void 0:y.name)||"default",l=ei(e,i,c,s),p=ti(r&&typeof t=="object"||typeof t=="function",l);return Fn(async()=>{if(typeof t=="string"){const v=new URL(t,location.origin);let m=v;try{if(s){const b=new URL(s,v);b.origin===v.origin&&(m=b)}}catch{}return location.origin===m.origin&&(m.pathname.startsWith(`${i}/`)||m.pathname===i)?v:m}const f=await(typeof t=="object"?ha(t):t)({client:a,previewUrlSecret:p,studioPreviewPerspective:Bt(n),previewSearchParam:s,studioBasePath:i});return new URL(f,location.origin)},[...l,p])}const Zo=Symbol("sanity/presentation/resolveUUID");function ei(t,e,n,s){const r=z.c(12);let a;r[0]!==s?(a=()=>s||"",r[0]=s,r[1]=a):a=r[1];const[o,i]=h.useState(a),c=h.useRef(0);let l,p;r[2]!==o||r[3]!==s?(l=()=>{if(o&&s)return window.clearTimeout(c.current),()=>{c.current=window.setTimeout(()=>{i("")},100)}},p=[o,s],r[2]=o,r[3]=s,r[4]=l,r[5]=p):(l=r[4],p=r[5]),h.useEffect(l,p);const d=Ot();let y;const f=d==null?void 0:d.id;let v;return r[6]!==e||r[7]!==o||r[8]!==f||r[9]!==t||r[10]!==n?(v=["sanity/presentation",e,n,t,f,Zo,o],r[6]=e,r[7]=o,r[8]=f,r[9]=t,r[10]=n,r[11]=v):v=r[11],y=v,y}function ti(t,e){const n=z.c(10);let s;n[0]===Symbol.for("react.memo_cache_sentinel")?(s={apiVersion:Ge},n[0]=s):s=n[0];const r=Ke(s),a=Ot(),[o,i]=h.useState("");let c;n[1]!==r||n[2]!==(a==null?void 0:a.id)||n[3]!==e||n[4]!==t||n[5]!==o?(c=t?Fn(async()=>await fa(r,"@sanity/presentation",typeof window>"u"?"":location.href,a==null?void 0:a.id),[...e,o]):null,n[1]=r,n[2]=a==null?void 0:a.id,n[3]=e,n[4]=t,n[5]=o,n[6]=c):c=n[6];const l=c;let p,d;return n[7]!==l?(p=()=>{if(!l)return;const y=setTimeout(()=>{h.startTransition(()=>i(l.expiresAt.toString()))},l.expiresAt.getTime()-Date.now());return()=>clearTimeout(y)},d=[l],n[7]=l,n[8]=p,n[9]=d):(p=n[8],d=n[9]),h.useEffect(p,d),(l==null?void 0:l.secret)||null}function wt(){const t=z.c(4);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,t[0]=e):e=t[0];const[n,s]=h.useState(e);let r;e:{const l=Array.from(n.values());if(l.find(si)){r="connected";break e}const p=l.filter(ri);if(p.length){r=p.some(ni)?"connecting":"reconnecting";break e}r="idle"}const a=r;let o;t[1]===Symbol.for("react.memo_cache_sentinel")?(o=l=>{s(p=>{var y;const d=new Map(p);if(l.status==="disconnected")d.delete(l.connection);else{const f=((y=d.get(l.connection))==null?void 0:y.hasConnected)||l.status==="connected",v=l.status==="handshaking"?"connecting":l.status;d.set(l.connection,{status:v,hasConnected:f})}return d})},t[1]=o):o=t[1];const i=o;let c;return t[2]!==a?(c=[a,i],t[2]=a,t[3]=c):c=t[3],c}function ni(t){const{hasConnected:e}=t;return!e}function ri(t){const{status:e}=t;return e==="connecting"}function si(t){const{status:e}=t;return e==="connected"}const ai=h.lazy(()=>ke(()=>import("./LiveQueries-BBzIevxh.js"),__vite__mapDeps([2,1,3]))),oi=h.lazy(()=>ke(()=>import("./PostMessageDocuments-D7CaEV4c.js"),__vite__mapDeps([4,1]))),ii=h.lazy(()=>ke(()=>import("./PostMessageRefreshMutations-BwB6fNds.js"),__vite__mapDeps([5,1]))),ci=h.lazy(()=>ke(()=>import("./PostMessagePerspective-DUPZh3PD.js"),__vite__mapDeps([6,1]))),li=h.lazy(()=>ke(()=>import("./PostMessagePreviewSnapshots-C8ytQOak.js"),__vite__mapDeps([7,1]))),ui=h.lazy(()=>ke(()=>import("./PostMessageSchema-hyBbu31g.js"),__vite__mapDeps([8,1]))),di=h.lazy(()=>ke(()=>import("./PostMessageTelemetry-DeQKWcYb.js"),__vite__mapDeps([9,1]))),pi=pe(ne)`
  overflow-x: auto;
`;function fi(t){var $e,we,ze,xe,Pe;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:n,canUseSharedPreviewAccess:s,tool:r,vercelProtectionBypass:a}=t,o=($e=r.options)==null?void 0:$e.components,i=(we=r.options)==null?void 0:we.previewUrl,c=r.name||br,{unstable_navigator:l,unstable_header:p}=o||{},{navigate:d,state:y}=kt(),f=vn(Object.fromEntries(y._searchParams||[])),{perspectiveStack:v,selectedPerspectiveName:m="previewDrafts",selectedReleaseId:b}=wr(),g=b?v:m,w=Yo(i||"/",c,g,f.preview||null,e),P=h.useMemo(()=>i&&typeof i=="object"&&"draftMode"in i&&i.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),i.draftMode.shareAccess!==!1):i&&typeof i=="object"&&"previewMode"in i&&i.previewMode?i.previewMode.shareAccess!==!1:!1,[i]),[x]=h.useState(()=>{var q;const M=(q=r.options)==null?void 0:q.devMode;return typeof M=="function"?M():typeof M=="boolean"?M:typeof window<"u"&&window.location.hostname==="localhost"}),j=h.useMemo(()=>w.origin,[w.origin]),R=h.useRef(null),[_,I]=h.useState(),[S,E]=h.useState(null),C=h.useRef({title:void 0,url:void 0}),{navigate:k,navigationHistory:A,params:T,searchParams:$,structureParams:D}=Jo({initialPreviewUrl:w,routerNavigate:d,routerState:y,routerSearchParams:f,frameStateRef:C}),O=h.useMemo(()=>Vn(k,50),[k]),[L,N]=h.useReducer(xr,{},Pr),J=h.useMemo(()=>T.viewport?"mobile":"desktop",[T.viewport]),[V,Q]=zo(g,C),re=Sr(),ie=_r(),W=Uo({navigate:k,navigationHistory:A,path:T.preview,previewUrl:(ze=r.options)==null?void 0:ze.previewUrl,resolvers:(Pe=(xe=r.options)==null?void 0:xe.resolve)==null?void 0:Pe.mainDocuments}),[Z,ce]=wt(),[le,H]=wt(),[F,B]=wt(),{open:K}=Qo(_),se=L.iframe.status==="loading";h.useEffect(()=>{var U;const M=(U=R.current)==null?void 0:U.contentWindow;if(!M||se)return;const q=Xs({targetOrigin:j});return q.addTarget(M),I(q),()=>{q.destroy(),I(void 0)}},[j,se]);const G=bn((M,q,U)=>O(M,q,U));h.useEffect(()=>{if(!_)return;const M=_.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},ot().provide({actors:tn()}));M.on("visual-editing/focus",U=>{"id"in U&&G({type:U.type,id:U.id,path:U.path})}),M.on("visual-editing/navigate",U=>{const{title:Zn,url:Je}=U;if(C.current.url!==Je)try{const[er,tr]=Je.split("?"),Qe=new URLSearchParams(tr);Qe.delete(Ue),Qe.delete(Ct),G({},{preview:`${er}${Qe.size>0?"?":""}${Qe}`})}catch{G({},{preview:Je})}C.current={title:Zn,url:Je}}),M.on("visual-editing/meta",U=>{C.current.title=U.title}),M.on("visual-editing/toggle",U=>{N({type:jr,enabled:U.enabled})}),M.on("visual-editing/documents",U=>{Q("visual-editing",U.perspective,U.documents)}),M.on("visual-editing/refreshing",U=>{U.source==="manual"?clearTimeout(be.current):U.source==="mutation"&&N({type:Gt})}),M.on("visual-editing/refreshed",()=>{N({type:wn})}),M.onStatus(ce);const q=M.start();return E(M),()=>{q(),E(null)}},[_,G,Q,ce,j]),h.useEffect(()=>{if(!_)return;const M=_.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},ot().provide({actors:tn()}));return M.onStatus(B),M.on("preview-kit/documents",q=>{q.projectId===re&&q.dataset===ie&&Q("preview-kit",q.perspective,q.documents)}),M.start()},[_,ie,re,Q,B,j]);const ee=h.useCallback(M=>{O({path:$n.toString(M)},{},!0)},[O]),Y=h.useCallback(M=>{const q=new URL(M,w.origin),U=q.pathname+q.search;q.origin===w.origin&&U!==T.preview&&O({},{preview:U})},[w,T,O]),ae=h.useCallback(M=>{O({},M)},[O]);h.useEffect(()=>{T.id&&T.path?S==null||S.post("presentation/focus",{id:T.id,path:T.path}):S==null||S.post("presentation/blur")},[T.id,T.path,S]),h.useEffect(()=>{C.current.url&&T.preview&&C.current.url!==T.preview&&(C.current.url=T.preview,Z!=="connected"&&R.current?R.current.src=`${j}${T.preview}`:S==null||S.post("presentation/navigate",{url:T.preview,type:"replace"}))},[Z,j,T.preview,S]);const oe=h.useCallback(()=>S==null?void 0:S.post("presentation/toggle-overlay"),[S]),[he,me]=h.useState(null);h.useEffect(()=>{const M=U=>{ln(U)&&oe()},q=U=>{ln(U)&&oe(),mi(["mod","\\"],U)&&oe()};return window.addEventListener("keydown",q),window.addEventListener("keyup",M),()=>{window.removeEventListener("keydown",q),window.removeEventListener("keyup",M)}},[oe]);const[_e,fe]=h.useState(null),[{navigatorEnabled:je,toggleNavigator:ge},Ee]=po({unstable_navigator:l}),be=h.useRef(void 0),Re=h.useCallback(M=>{if(N({type:Gt}),S){be.current=window.setTimeout(M,300),S.post("presentation/refresh",{source:"manual",livePreviewEnabled:F==="connected"||le==="connected"});return}M()},[le,F,S]),Le=Er(),Te=h.useCallback(({id:M,type:q,path:U})=>{if(C.current.url)return{title:C.current.title||C.current.url,name:"edit",params:{id:M,path:U,type:q,inspect:Tr,workspace:Le.name,mode:Rr,preview:T.preview}}},[T.preview,Le.name]),Ce=h.useCallback(M=>{O({},{viewport:M==="desktop"?void 0:"mobile"},!0)},[O]);return u.jsxs(u.Fragment,{children:[u.jsx(yo,{devMode:x,name:c,navigate:O,params:T,searchParams:$,structureParams:D,children:u.jsx(lo,{navigate:O,children:u.jsx(go,{params:T,children:u.jsx(Pa,{comlink:S,children:u.jsx(pi,{height:"fill",children:u.jsxs($a,{children:[u.jsx(Ee,{}),u.jsx(Vt,{id:"preview",minWidth:325,defaultSize:je?50:75,order:3,children:u.jsx(ne,{direction:"column",flex:1,height:"fill",ref:fe,children:u.jsx(Cr,{element:_e,children:u.jsx(Qn,{canSharePreviewAccess:P,canToggleSharePreviewAccess:n,canUseSharedPreviewAccess:s,dispatch:N,header:p,iframe:L.iframe,initialUrl:w,loadersConnection:le,navigatorEnabled:je,onPathChange:Y,onRefresh:Re,openPopup:K,overlaysConnection:Z,previewUrl:T.preview,perspective:g,ref:R,setViewport:Ce,targetOrigin:j,toggleNavigator:ge,toggleOverlay:oe,viewport:J,visualEditing:L.visualEditing,vercelProtectionBypass:a},j)})})}),u.jsx(co,{documentId:T.id,documentsOnPage:V,documentType:T.type,getCommentIntent:Te,mainDocumentState:W,onFocusPath:ee,onStructureParams:ae,searchParams:$,setDisplayedDocument:me,structureParams:D})]})})})})})}),u.jsxs(h.Suspense,{children:[_&&u.jsx(ai,{controller:_,perspective:g,liveDocument:he,onDocumentsOnPage:Q,onLoadersConnection:H}),S&&T.id&&T.type&&u.jsx(ii,{comlink:S,id:T.id,type:T.type,loadersConnection:le,previewKitConnection:F}),S&&u.jsx(ui,{comlink:S,perspective:g}),S&&V.length>0&&u.jsx(li,{comlink:S,perspective:g,refs:V}),S&&u.jsx(oi,{comlink:S,perspective:g}),S&&u.jsx(wa,{comlink:S}),S&&u.jsx(ci,{comlink:S,perspective:g}),S&&u.jsx(di,{comlink:S})]})]})}function ln(t){return t.key==="Alt"}const hi=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),un={alt:"altKey",ctrl:"ctrlKey",mod:hi?"metaKey":"ctrlKey",shift:"shiftKey"};function mi(t,e){return t.every(n=>un[n]?e[un[n]]:e.key===n.toUpperCase())}function gi(){const t=z.c(7);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:Ge},t[0]=e):e=t[0];const n=Ke(e),[s,r]=h.useReducer(yi,"loading"),[a,o]=h.useState(null);let i,c;t[1]!==n?(i=()=>{const p=va(n,d=>{o(d),r()});return()=>p()},c=[n],t[1]=n,t[2]=i,t[3]=c):(i=t[2],c=t[3]),h.useEffect(i,c);let l;return t[4]!==s||t[5]!==a?(l=[a,s],t[4]=s,t[5]=a,t[6]=l):l=t[6],l}function yi(){return"ready"}function vi(t){const e=z.c(17),{t:n}=ye(ve),{previewUrl:s}=t.tool.options??{},{push:r}=gn(),a=typeof s=="object"||typeof s=="function",o=vr(),[i,c]=h.useState(null),[l,p]=h.useState(null),[d,y]=h.useState(null),[f,v]=h.useState(null);let m,b;e[0]!==o||e[1]!==a?(m=()=>{if(!a)return;const E=o.checkDocumentPermission("create",{_id:Me,_type:qe}).subscribe(c),C=o.checkDocumentPermission("update",{_id:Me,_type:qe}).subscribe(p),k=o.checkDocumentPermission("read",{_id:Me,_type:qe}).subscribe(y),A=o.checkDocumentPermission("create",{_id:`drafts.${hn()}`,_type:mn}).subscribe(v);return()=>{E.unsubscribe(),C.unsubscribe(),k.unsubscribe(),A.unsubscribe()}},b=[o,a],e[0]=o,e[1]=a,e[2]=m,e[3]=b):(m=e[2],b=e[3]),h.useEffect(m,b);const g=f==null?void 0:f.granted;let w,P;e[4]!==g||e[5]!==r||e[6]!==n||e[7]!==a?(w=()=>{if(!a||g!==!1)return;const E=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:n("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(E)},P=[g,r,n,a],e[4]=g,e[5]=r,e[6]=n,e[7]=a,e[8]=w,e[9]=P):(w=e[8],P=e[9]),h.useEffect(w,P);const[x,j]=gi();if(j==="loading"||a&&(!i||typeof i.granted>"u"||!l||typeof l.granted>"u"||!f||!d||typeof d.granted>"u"||typeof f.granted>"u")){let E;return e[10]===Symbol.for("react.memo_cache_sentinel")?(E=u.jsx(yn,{}),e[10]=E):E=e[10],E}const R=g===!0,_=(i==null?void 0:i.granted)===!0&&(l==null?void 0:l.granted)===!0,I=(d==null?void 0:d.granted)===!0;let S;return e[11]!==t||e[12]!==R||e[13]!==_||e[14]!==I||e[15]!==x?(S=u.jsx(fi,{...t,vercelProtectionBypass:x,canCreateUrlPreviewSecrets:R,canToggleSharePreviewAccess:_,canUseSharedPreviewAccess:I}),e[11]=t,e[12]=R,e[13]=_,e[14]=I,e[15]=x,e[16]=S):S=e[16],S}const ji=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"}));export{ji as P,xi as a,zn as b,Es as c,ot as d,tn as e,Pi as g,Si as p,_i as r,Rs as t,Ne as w};
